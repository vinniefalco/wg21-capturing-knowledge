# Evaluation: P0447R21 ‚Äî Introduction of std::hive to the standard library

**Paper:** P0447R21  
**Title:** Introduction of std::hive to the standard library  
**Authors:** Matthew Bentley  
**Link:** [https://wg21.link/P0447R21](https://wg21.link/P0447R21)  
**Revision Date:** 2023-02-11  
**Evaluation Date:** 2026-01-07

---

## Gate: Standardization Justification

**G0. What coordination failure does this solve?** ‚ùå FAIL  
No coordination failure documented. The paper demonstrates a useful container pattern but does not show interoperability harm from ecosystem fragmentation. plf::colony/hive has existed as a working third-party library for years.

**G1. Why not third-party?** ‚ùå FAIL  
No specific reason given why plf::hive cannot remain a third-party library. The paper's own Appendix I container selection guide references plf::stack, plf::queue, plf::list, robin-map, and absl containers‚Äîall third-party libraries‚Äîundermining any argument that hive uniquely requires standardization.

**G2. Perpetual costs acknowledged?** ‚ö†Ô∏è PARTIAL  
The paper is thorough on technical specification but does not explicitly analyze implementation burden across vendors, teaching burden, or make defect resolution commitments. Some complexity analysis is provided.

**Gate Result:** ‚ùå AUTOMATIC FAIL ‚Äî Standardization not justified

---

## Guidance for Authors

This evaluation is not a judgment on whether std::hive is useful or well-designed‚Äîthe extensive benchmarks, user experience reports, and 21 revisions demonstrate it is both. The gate failure indicates that the proposal, as written, has not yet made the case for why this functionality must be in the C++ standard library rather than distributed through the ecosystem.

### What Was Missing

**G0 failed** because the paper does not document a coordination failure that standardization would resolve. The existence of plf::colony/hive (the reference implementation) for many years demonstrates the ecosystem can and does distribute this functionality. No evidence of:
- Documented incidents where different hive implementations caused interoperability problems
- Projects that needed to exchange hive objects at API boundaries and failed
- Quantified harm from the current ecosystem approach

**G1 failed** because the paper's own container selection guide (Appendix I) recommends third-party libraries (plf::stack, plf::queue, plf::list, robin-map, absl::flat_hash_map, ring_span lite) alongside standard containers‚Äîdemonstrating the author's view that third-party distribution is acceptable for specialized containers. The paper does not explain why hive is different.

**G2 partially passed** because while the technical specification is thorough, there is no explicit acknowledgment of perpetual costs: no analysis of implementation complexity for vendors, no teaching burden estimate, no succession plan for long-term maintenance.

### How to Strengthen a Revision

To pass G0, consider adding:
- **Documented coordination failures**: Are there projects where incompatible "hive-like" containers caused real problems?
- **Vocabulary type argument**: Do libraries need to exchange hive objects at API boundaries? (This seems unlikely given hive's specialized use case)
- **Why ecosystem convergence failed**: Has there been an attempt to standardize on plf::hive in the ecosystem that failed?

To pass G1, consider adding:
- **What makes hive different from plf::stack/queue/list?** The paper recommends those as third-party libraries. Why does hive require standardization when those don't?
- **Cross-library API boundary examples**: Show cases where libraries need to agree on a hive type
- **Platform availability analysis**: Document platforms where plf::hive is unavailable via vcpkg/conan

To pass G2, consider adding:
- **Implementation burden analysis**: Estimate complexity for libc++, libstdc++, MSVC STL
- **Interaction surface**: Which existing standard library components does hive interact with?
- **Maintenance commitment**: Who will address defects post-standardization?

### Alternative Paths

If standardization justification remains difficult to establish, consider:
- **Boost submission**: Establish hive in Boost to gather broader ecosystem adoption data
- **vcpkg/conan metrics**: Document adoption via package manager downloads
- **Industry endorsement**: Gather formal endorsements from game studios or AUTOSAR explaining why standardization (vs. plf::hive) is necessary

### Strengths to Preserve

- Exceptional use-case documentation with real game engine requirements (Appendix E)
- User experience reports from production deployments (Appendix H)
- Comprehensive benchmark data comparing against alternatives (Appendix B)
- Thorough technical specification refined through 21 revisions with expert feedback

---

*This feedback is generated to help improve proposals. The committee values your contribution to C++ and encourages resubmission once the standardization justification is strengthened.*

---

## Detailed Evaluation (For Reference)

> ‚ö†Ô∏è **This proposal failed the standardization justification gate.** The detailed evaluation below is provided for reference. The primary action items are in Guidance for Authors above.

üî¥ GATE FAIL: Proposal does not justify why this cannot remain a third-party library. plf::hive already exists and works.

| Category | Score | |
|----------|-------|---|
| 1. Use-Case Validation | 2 | ‚úÖ |
| 2. Economic Analysis | 0 | ‚ùå |
| 3. Vocabulary Necessity | 0 | ‚ùå |
| 4. External Validation | 2 | ‚úÖ |
| 5. Implementation | 2 | ‚úÖ |
| 6. Completeness | 2 | ‚úÖ |
| 7. Incentive Alignment | 1 | ‚ö†Ô∏è |
| 8. Retrospective Commitment | 0 | ‚ùå |
| 9. Process & Timeline | 2 | ‚úÖ |
| 10. Practical Usability | 2 | ‚úÖ |
| 11. Safety & Stability | 1 | ‚ö†Ô∏è |
| 12. Ecosystem Consideration | 0 | ‚ùå |
| 13. Expert Weighting | 2 | ‚úÖ |
| **TOTAL** | **16/26** | Library threshold: 14 ‚úÖ (but gate failed) |

## Summary

P0447R21 is a meticulously crafted proposal representing years of work. The technical content is excellent: comprehensive benchmarks, detailed use-case analysis, user experience reports, and a mature reference implementation (plf::colony/hive) with production deployment. The 21 revisions demonstrate sustained commitment and responsiveness to expert feedback from Jonathan Wakely, Tim Song, Ben Craig, and others.

However, the proposal exemplifies the "multiple implementations exist" anti-pattern that the evaluation gate is designed to catch. The existence of plf::hive as a successful third-party library is treated as evidence FOR standardization ("this is proven useful") when it actually demonstrates the ecosystem works. The paper never answers the core question: **What coordination failure does standardizing hive solve that using plf::hive doesn't?**

The paper's own container selection guide (Appendix I) recommends numerous third-party libraries (plf::stack, plf::queue, plf::list, robin-map, absl containers, ring_span lite) as appropriate choices‚Äîimplicitly acknowledging that third-party distribution is acceptable for specialized containers. No argument is made for why hive is categorically different.

**Recommendation:** Revise to document specific coordination failures, or consider whether ecosystem distribution via Boost/vcpkg is the appropriate path for this specialized container.

---

üö© Multiple implementations as justification ‚Äî plf::hive exists as working third-party library, treated as evidence FOR standardization  
üö© No standardization justification ‚Äî Paper focuses on utility without cost/benefit analysis of standardization vs. ecosystem  
üö© Vocabulary assertion without evidence ‚Äî No demonstration that libraries need to exchange hive objects at API boundaries  
üö© No retrospective plan ‚Äî No success criteria or adoption targets defined

---

## Category-by-Category Analysis

### 1. Use-Case Validation ‚Äî ‚úÖ

**Score: 2/2**

Exceptional use-case documentation. The paper opens with concrete scenarios: game engine entity management, simulations requiring stable pointers during iteration, and cases requiring non-back erasure with pointer stability. Appendix E details typical game engine requirements with specific examples.

**Evidence cited:** "Hive is a formalisation, extension and optimization of what is typically known as a 'bucket array' container in game development circles... stable pointers/iterators/references to non-erased elements are required"

---

### 2. Economic Analysis ‚Äî ‚ùå

**Score: 0/2**

No analysis of perpetual standardization costs. No comparison of standardization burden vs. ecosystem distribution. No acknowledgment that plf::hive already provides this functionality without imposing costs on vendors or the committee.

**Evidence cited:** None found.

---

### 3. Vocabulary Necessity ‚Äî ‚ùå

**Score: 0/2**

No vocabulary type argument made. Hive is a specialized container for specific use patterns (game engines, simulations), not a type that libraries need to exchange at API boundaries. No documented coordination failures between different hive-like implementations.

**Evidence cited:** None found. The paper does not argue that libraries need to agree on a standard hive type for interoperability.

---

### 4. External Validation ‚Äî ‚úÖ

**Score: 2/2**

Strong external validation. Appendix H contains user experience reports from production deployments. Game engine requirements documented. The container has been deployed in real systems and refined based on feedback.

**Evidence cited:** Appendix H "User experience reports" documents production use. Appendix E covers "Typical game engine requirements."

---

### 5. Implementation & Field Experience ‚Äî ‚úÖ

**Score: 2/2**

Excellent implementation experience. plf::colony (now plf::hive) has been publicly available for years with positive user feedback. Multiple users have deployed it in production. The implementation has been refined through real-world use.

**Evidence cited:** "All of these are declared constexpr and are nonthrowing" ‚Äî Reference implementation thoroughly tested. User experience reports in Appendix H.

---

### 6. Completeness ‚Äî ‚úÖ

**Score: 2/2**

Complete container specification. All member functions specified with complexity requirements. Ready for immediate use upon standardization. No "ecosystem will provide" gaps.

**Evidence cited:** Section 6 "Technical Specification" is comprehensive.

---

### 7. Incentive Alignment ‚Äî ‚ö†Ô∏è

**Score: 1/2**

Single author with sustained long-term engagement (21 revisions over years). However, no succession plan or corporate backing for long-term maintenance. Risk of author disengagement post-standardization.

**Evidence cited:** Single author listed. No maintenance commitment stated.

---

### 8. Retrospective Commitment ‚Äî ‚ùå

**Score: 0/2**

No success criteria defined. No adoption targets. No retrospective plan. No mechanism for measuring whether standardization achieved its goals.

**Evidence cited:** None found.

---

### 9. Process & Timeline ‚Äî ‚úÖ

**Score: 2/2**

Exemplary process. 21 revisions demonstrating sustained effort and responsiveness to feedback. Design decisions documented. Competing approaches analyzed. Clear evolution from R0 to R21.

**Evidence cited:** Revision history shows systematic incorporation of feedback from committee members.

---

### 10. Practical Usability ‚Äî ‚úÖ

**Score: 2/2**

Clear, practical API. The container selection guide (Appendix I) demonstrates thoughtful consideration of when to use hive vs. alternatives. Basic usage examples in Appendix A.

**Evidence cited:** Appendix A "Basic usage examples" and Appendix I container selection guide.

---

### 11. Safety & Stability ‚Äî ‚ö†Ô∏è

**Score: 1/2**

Complexity requirements specified. Iterator invalidation rules documented. However, no explicit discussion of ABI implications or safety roadmap contribution.

**Evidence cited:** Appendix F "Time complexity requirement explanations."

---

### 12. Ecosystem Consideration ‚Äî ‚ùå

**Score: 0/2**

This is the critical failure. The paper does not address why plf::hive cannot remain a third-party library. The container selection guide recommends other third-party libraries (plf::stack, plf::queue, plf::list, robin-map, absl containers) without explaining why hive is different. No analysis of ecosystem vs. standard distribution.

**Evidence cited:** Appendix I recommends third-party libraries as appropriate choices for specialized containers, undermining the standardization argument.

---

### 13. Expert Weighting ‚Äî ‚úÖ

**Score: 2/2**

Extensive expert review. Revision history cites feedback from Jonathan Wakely, Tim Song, Ben Craig, Ga≈°per A≈æman. The technical specification has been refined through years of expert input.

**Evidence cited:** Revision history cites "Jonathan Wakely's extensive technical critique," "Tim Song's feedback," "Ben Craig's feedback."
