b8d86eac-fccc-4fa1-a3df-8ebf2066650a Hi and welcome back to another VC libraries. 25207a0a-d653-49db-9469-89bd9ece42b2 Open code review. 535df3c7-c25d-4fa1-a1c2-5ca6da2bdb85 Today we'll be looking at a PR, 4fbb51a0-6e10-4500-9559-2481c982f137 a very large one from Casey Carter 9ba86591-0ac5-4dda-8f34-d2fee6340be5 and the PR will be number 2806 0d2406b4-da7e-4b6b-b7b0-170cf7680428 implementing paper P 1206 R 7 a7ec5547-21b7-4e8e-a830-dd63ee99339d conversions from ranges to containers. a385e703-0d58-4a8e-b194-5ea2994a7826 Let me go ahead and share my screen. 1e856994-663e-46c2-9137-72a39118102e So here is the PR we'll be c0895be0-9df8-4445-98ed-00bb13c5e473 looking at 2806 UM, as usual, uh, c96d8f1a-f315-432d-a094-dd5088acba3f we have a tracking issue that's this a0b08b4c-e9ab-47ce-a89d-f85ec30b1f54 12532 that links to the paper itself 617691c1-a165-4b6f-aa7e-4f6090ac694d and mentions the feature test macro 243c04bb-b2a2-45ad-8521-e90e8c6a2398 values as we're finally decided 3eaae63f-b31b-4bdc-8291-1f110ff67721 for the CPS working paper and I 51eef84e-b425-4355-8cb5-1869e25a39b5 have brought up the paper itself. d9524399-be97-4797-a95f-836e68debe52 Some context here is we are trying to a108d3c7-4957-496b-b351-2350ba22ed42 implement all of the C23 papers that 0f27065e-1ccb-4ee0-a93d-5619e89643b9 have been voted in so far to the standard. cf599d7e-0cc0-4afc-a75b-954c7bc9757b Here's our status chart. 4083a278-61ac-416c-86e4-7fdece85b98a This is since we went open source or 8ace4fa0-861a-4e2c-a8d2-428f38568e3b I can click on more history to get 439ad877-0fcc-443e-b45d-72d8fd10aedf the entire recorded history since mid 16e605d3-1d7b-4161-9bd3-a5f4ecbc52df 2017 when we started keeping track. b483ff2e-3fa4-44bd-86d2-7328f599f104 So currently we are at six C + + 23 7cedc22a-958e-48df-89db-0f164a476b6f library features remaining to be implemented. 7ca9dbf5-1d44-4c3e-aeb8-0aa9f3fac572 And once we get this, uh, 7fa1c4f8-0d39-43cb-8da5-b55d98b98f6c paper merged, we'll be down to five. 365e7eaa-53be-4fb3-a1a0-0600ad798be1 So every time this line ticks 1d247e1f-b066-4e27-9b20-d224e2f0deb7 down from 6 to 5 and so forth, 8099a3d6-c750-4975-ac57-32696842a8e3 that's a major accomplishment. 9558dd16-2efa-470a-8b17-d508be631dc2 Even though it looks like it's 39b091cb-a211-4b4f-9648-3e6667632dc9 just a very small amount and we're 6f187059-55f1-4a7a-b78e-ce503f7ffdfa trying to remain clean. 14358d4a-8cb3-4a17-856d-fe0956008c8c You can see this sort of zigzag, 37887999-2af5-473e-b717-97ea151fe4f6 especially if I focus on just C + 23. 67f9d1bb-6000-4f64-982d-d629efabe825 This sort of sawtooth pattern every d9f1d32c-8310-46d8-868d-425b4df590d8 time the committee votes and stuff, c364c969-35d5-4096-ad03-b257b043bd80 we go and implement it merge a lot of 24a70583-f3e6-4fb1-bcd7-d6cdbdf73747 things for our from our contributors, ec3db41e-8197-4e04-9e64-7f2f55363c52 then the committee votes and more stuff. 2cc88b4f-61ac-4308-b8b0-d279e03f8b53 And by trying to remain clean and f5dfa40c-54a4-4223-a247-58ae22451ca9 getting down to close to zero before 01714ee9-3014-46d8-879b-2fae3fa230e5 the committee votes and more stuff, 090bb7d7-dbb8-4a96-9c8a-13e272fc2f6b we don't develop a huge backlog, 720ab209-7df6-4b79-a0dd-21906963396f which is what happened during 3eb9f96e-e8b8-4b02-ac03-507cec3f86ee the CS plus 20 era, dc3e9e30-19fe-4ecd-be73-d9f9a46b8ced as we're getting better and better 3a613e67-3576-4d5d-9e47-b3e58285e846 at implementing features rapidly. 010e063c-c189-46bb-a3db-93292689a4df So it's great to see that Casey has 5189868b-ac9d-41e8-9044-75649dd12978 implemented this paper that he Co authored. ae3788d8-af95-4f10-b2ae-df44f16ef4de It is however. 1078eedb-b5b1-4bfd-bbdf-6f40e12cb28f A very large PR and a very large paper. 5f7772cf-d3de-49bb-8156-3657fd98cb9d Uh, 4dbbfbf9-0c9c-40cc-b40c-ac7c452ae178 if we look at the PR it's over 7000 lines. d6df495a-377c-4c79-91bb-9b3d5f1810da A lot of its test code, 5d2f2265-f6f2-4f42-86f0-5231f518699a but it's not entirely test 83122581-316a-47c4-b383-1d8e3a842812 code and the feature itself. e844c308-996d-4962-af5c-e25721f7333f I was just scrolling down to the 721f9299-40c6-47e8-8927-d40a0d4c3ca2 bottom and this is an 86 page paper, b589807b-bc39-4a65-8221-ba8556ce55b1 so this is actually a relatively large 95ba7994-49cd-46c4-9a73-f1e93b00594f feature authored by quarantine jabat, 5efede62-2a53-4cf4-9fc6-52ade47b2f23 Eric Niebler and Casey Carter, 1723ac0f-6a10-4b97-98cf-f69d0b9d5430 and I am vaguely familiar 87f5c578-ba25-4108-a619-ab8df17a4c66 with what the paper is doing, c2b3b595-517b-4efb-99fc-1d31e2effbd9 but not entirely, fddeba87-8d7a-450a-92b7-e17d49b191bf so I'll be spending a little bit of time. 41157b0f-04a6-44ba-a292-6cada9421726 Reading this paper uh on the video code ac973e7c-408e-430e-a3d3-7d225899131d review and mentioning my thoughts before 60553d23-5341-4658-9077-4fd700818551 we delve into the code and so forth. 228c8dde-32c9-45b8-96c9-c11cfe7e0e0b Uh, OK, so to start with Umm, let's see. e8b9d08e-68db-42b5-8877-d43cfc89576d I think this is big enough. d89c07ae-9a4a-42d6-b030-38180044d78f I'm at 1:50. 3ea39d65-e16c-4765-94fc-c50b3fcb98a5 Zoom Casey has an excellent change log here. 4100dbd3-10a4-4722-85f2-e94dd403bb24 This is something that's e206f6d6-945a-43b5-9bde-f34390fc0dfd greatly appreciated in PQRS, 4906d076-a051-4d48-b398-f08354b55702 where you know we have the tracking 5aa4b800-a955-49ed-82ad-f8e2013307a4 issues so we can see what it's doing. 0870a399-9d3b-4792-8b51-36a147674dde But it's also helpful to have 3340bbfb-c523-4efe-a00a-968de7905bd1 a guide to what a403d3d9-69a9-415d-8dad-e5c95f0f2aa4 files are being changed. 4d98abc3-61d3-4dad-b4e9-d58b77c37e00 So here Casey's broken it up by edc63f68-8f12-4967-8d29-d457ac3700c8 each individual header that's 1c2a3e20-7ad8-4ee2-9d11-e978352bdeba being modified and the test that. b3d83528-741a-444b-94d0-459ab1e039b0 That are being modified and so forth. e1c675fa-a1ce-4d73-a0f9-638acbcb7cc2 So if I'm ever confused about 87ba0d48-2846-4bc7-8a44-6603178df2bf like why changes are happening, 4babb392-7838-4770-b776-354f1baff3df especially changes to internal 4189a197-1a09-4e36-acc8-7af6bc6c68ba machinery that should be answered fabea06b-f08c-4d15-906c-afb9af37a6d0 by this change log here, 4c8590a4-972b-4978-ba61-f655521c0bc2 so I won't go ahead and read all of this, 66bd0c98-53b4-4611-98e3-c6f405a68b93 but I will consult this if necessary. 4ed976bc-1d7b-4d24-98ac-01f086e00f76 If I'm wondering, hey, c2821c06-0821-4bda-a8e0-5bd46a3e1a3a you know why is this being changed 37839e1f-e238-4531-a6e5-90ce105e2b0f or you know was something missing? e06e3064-5e33-4d1f-9473-be2ade2af508 I can go back and check this. aa0a04d7-5607-425c-b10b-bd243d34e6f0 There's even notes about. 0ded0dd7-b56d-4820-b1d3-9fc49351e5c7 Proposed resolutions for library 48f8367c-b158-4d78-b3a0-43786003439d working group issues that have been 386ed034-4534-40b2-96be-7c1a6cb3bc46 implemented because our general 6bd0bf23-1d52-4100-9f3d-0dc146b9ef43 rule is we implement what's been 72e82c80-24c8-472e-895e-955943779095 voted into the C Plus working paper. a4d84582-0c03-499e-8946-2bb5f1175638 But if we do anything that's not yet 08d23988-2cea-4038-8c65-3bd0dcba20a2 official, it is very helpful to know 6cdbfb51-2309-47fc-82ba-6438b501dbfe that that's being done intentionally, 2dda98d6-0d86-42b8-9200-df0d177b7b7b rather than just going off and doing a bunch b3ceb46b-695b-4128-a9c2-b0a5d9a5e2dc of wild stuff because we think it's right. b02b1cab-d72d-47ac-839a-784765ffc1cc OK, so let's quickly read the paper and 5a2479d6-44b5-482c-b3e4-6694eba597c8 then I will actually start looking at 11ea793a-7f59-4377-a692-15e834c5ff5a the code so the structure of a paper. 509d2c67-e262-4a3f-a14a-f4b65ef6d05a In case you're not familiar, 07c22eba-095e-4dcd-b38d-7919de483782 it UM often has a change log f1565668-c366-4c26-a0ea-1764796703c1 for the paper itself, abef3712-dce9-49af-a668-02ecaef49de1 as the paper is revised. e7067726-4bd0-43f6-897e-1ca015f0c0e0 And I will Scroll down here past 4524aa98-820a-4344-8ae1-d5ca41fee37e that change log. 7524eeae-8ff2-4a1e-97a5-ba1224284e65 There's a very convenient overview. 9d2eec2a-5fba-491f-af4a-a9e76b04238c I guess I'm highlighting here that 78b84fd7-1b0b-4a4d-9eab-99a1fdcc55e3 explains what this is adding, 35e52b4f-f9fb-4f29-bedb-fe3c77608bca so there's going to be a function 66ffc7b7-54d0-4c6d-bd1a-71900a223791 ranges 2 and it will take a range, df9c22eb-af75-46bc-b900-c228fa1dffa1 which is that stuff that was added in C 76e1aa34-e679-4417-bb31-3cb1a462ea2a + 20 and we'll turn it into a container. d34dc0ba-5db6-4ae9-a7e8-09e302b0e6ad It'll materialize it as a container 60de07f4-3bdd-4a76-b6c2-03ba066a3c3c and it'll work with non standard 25b484a2-af80-4e36-ba96-9062138abbc3 containers and recursive containers. 51f44cc9-43ee-4152-9be9-66d414cd8b84 I don't know those are yet, b7bf30df-eba1-4e8a-aab1-489c023fa560 but we'll see below. aff14c63-2107-432b-a62b-f62259ada300 Hopefully, 3a5c3bbf-c40c-4418-988b-38c5caa3a24a and it also adds tagged constructors and 7c70c0a5-8ebf-429c-87b0-014d3fc3a8ca assert and assigned member functions 470f3931-e389-4dfa-b958-2c4fccef9eaf for standard containers and strength. 4f78ebac-cfcd-413b-9134-e12376c517c6 So there's a bunch of example usage here. 0da9b2df-d1af-4a8d-bba2-dc970337efe9 This might be a little small to see. 68b7be7d-dbe8-487d-9411-c71a6a726be8 Maybe I can step zoom one. 670c3673-0f76-4fc4-b9f9-79c63f30561b OK, here we go. b0d99bab-9448-45db-a184-d66d949fe6c2 So here's a nice motivating example. 88f31bf3-ac33-4d7a-9a1d-561a8bec6164 We've got stood views IOTA one through 10, afd84cac-2c51-49a4-afe8-098033e2844f so this is gonna count the 263bd3fb-0b50-4cfb-be9d-463a9055fa02 numbers one through 10. b717f98b-f67f-402c-8b80-59c2e5a2eb42 I believe that is inclusive here. 54073a00-9f4f-4d30-9ab9-289b0a77edb6 And this range can then be fed 0ce43983-c3b4-4f56-b57a-518de8b97408 to other algorithms or views, db096b79-e41b-467b-840a-ee71f1606523 and we can operate on that. f7715ae7-6460-47d7-8af3-6ee5db005f37 But this iota view does not actually 2c99a1cc-106e-4344-9475-9ab64ab13ec8 physically store the numbers one 372d588e-c201-4de9-a22d-bb9a2bdfc33e through 10 anywhere in memory. fd669638-8beb-4c67-8f3e-9e23dee75296 It's sort of generating them on demand, 24aa481b-16f5-4311-bd09-330bb1d48898 as I understand it. 0d355328-7520-49cd-957a-0bedd350b9eb So if we actually want a vector of this, bc5b24fe-159a-4a6c-887a-5c6aca6edfc2 we will now be able, d589f565-6180-4773-81d5-d64420a32650 and C + 23 to say ranges 2 stood for 241c864e-a5be-4fb4-9f9d-ad18871619ad int and that will turn it into a 1072459b-6cd6-49b9-b044-e679558dad1e vector and a bunch of other examples here. 0e386656-f32c-40a2-975f-7949e9b28129 I can Scroll down, e43ead4c-8077-4f2c-843a-3a0f1481eb7e UM ohh I see nested ranges like 48a21383-7b2c-4569-b89b-8b450cc86b55 a list of forward list. e97cbb91-0f73-4304-b806-7128e3761544 So if I have a list of forward list 52c4b522-ce23-48c2-8e5c-85091676061f I can convert that into a vector adbf248d-3a3c-45d3-b9f5-a0db3c688fd5 vector int by saying ranges 2. 66683d70-c092-490b-8adb-52c488d3b33a This is cool. f20c0e9d-6f9e-455a-bcf2-4b84f152ac13 We didn't used to be able to ab2f25b7-287f-47ee-ac21-a54b3ddfb7ff do this directly. 9737d53e-db78-451f-b120-29dadce50b85 You could do one level by range constructing b8c033d5-9eba-4598-92e9-efad7d708899 a vector using first and last iterators, bf56057f-a7bf-4ec8-aa73-081d09f6d512 but converting multiple levels was c061df0a-20e1-4d14-ac99-17838a71ebbc not possible this conveniently, 13e44b40-044f-4bf7-8bde-864028c8e1b2 so that's quite nice. d0913067-1a64-4e22-93ce-9448a7232d18 Umm, 703f36c3-3b84-406a-a4d3-ce7e11455d24 these before and after tables. 7c065bcc-92dc-45e5-aab1-4a48c473accc We should really not be called Tony c4130e2f-b1fc-45df-aa0c-be5b837d1cc9 tables because that's a bit of W 21 f540d545-0af8-41d8-8ed4-6da341e9c7af insider jargon name for Tony Van Eerd, ef89634e-1fe3-46be-82a8-82662f12aa6a who's a committee member? 0d5103dc-ff41-4777-bf28-b1bc7d1d02bf Who's popularized these very 8da208c8-b06f-4890-9535-da2936576026 useful before and after tables b854e97d-6baa-46c8-8903-aa819f289226 is just the name is inscrutable, 93933edc-dd87-4b0a-9ff7-db8928f041dc and then some design notes 8f3d8e6b-baa7-4363-acd6-c28422999af4 on why this is designed. 1a350b38-42d9-4d00-84b4-23cf05c972d8 So if you've never read 84ae21f8-b408-4b8d-bbaa-0993c3cf4fef a standard paper before, d0c4f4a5-2e86-4e2f-bf04-8e70265a9bc9 this is actually quite useful aa523312-c211-4365-a8ef-86d73501a820 to understand why a feature 7cb9f63d-20f4-4dc6-bbb5-0ee12b983231 has been proposed the way it has, 15c0f945-22d0-43fd-8c06-29152ea2677c and I will skip over this. 8930a0dc-4983-48d9-abc4-6fe58dc7d566 Since I've got at least a ebebd32a-f3d6-4ca7-b46b-942446ad4030 basic idea of what's going on, c4340c1a-f445-4995-acaa-715c9863db49 I did want to jump here I'm talking about. 92ad61fc-f6a8-4d0b-8032-1a78ff8d3da4 Why the constructors and the Member 820a2fb7-3240-4bbe-982c-6efc4b69a44d functions have tax A tag type is an empty. a3028f6a-561f-4b90-8528-bf3e5f35eb9b I guess I can open my editor here. 30922d3c-6dda-4426-a18d-24850cbc15e0 So. Close this, actually, 2a9991cd-41ba-4cc2-a17c-d5e9724d1b4a I guess actually I can even show you 2e31c937-b75f-49d5-953a-3a739187d8d8 CP reference on piecewise construct. 6b990c22-a3b0-4712-ac5d-0ccfe14271b6 Here we go. OK, so piecewise construct, 7fd9da72-fe8b-4771-9f89-64aad4154c5e which goes back to C + 11 is an 02a33031-f53d-4415-9e8e-baf66e74100b example of a standard tag type. 01b738bf-9560-42c8-81a1-6877d074f606 The the C + 9803 had some tags like uh. 881b509b-f482-4cf8-a5a8-80697c8f246c Input iterator tag forward iterator 659a626c-1d58-4f56-a9b4-16d4ec193e86 tag that we used for tag dispatch. 548c05e1-eed3-49d9-860d-6f527cfb2a86 Piecewise construct is a little bit ec81008c-5d78-48b3-97de-4b8dd055dd71 different because it's actually f05f19f3-f96c-4881-b46e-a7eebf2d5e6e used for actual constructions. 80ad9b4c-5056-4b9c-bef3-7f1525a40529 You can take a pair and say I 190aa121-0dea-4da5-a3e7-6e4c8a1b3289 have a pair of A&amp;BI would like to 943d5d06-6452-403f-b41d-63bef027bdb7 construct the A&amp;B elements of this 6df1f6f3-cf08-42c2-839d-9671d34e2ff1 pair in place from arbitrary stuff. fd9d466b-841a-4b41-8f52-a965c1e88294 Piecewise construct is a tie or piecewise c3bd4154-2f28-4bda-8607-703d25ff7bc3 construct is an object of a type 639f31d5-fbab-4403-8bd5-835512ca2698 piecewise construct and it's stateless. 90d401e8-8372-4348-b04b-108fdbb4a7b5 It has no. 792e5469-37de-4ea2-8d72-712004875417 Actual use at runtime. 0c7c27de-71da-416d-ad8b-f58b22a7e481 It exists only to select a81d9248-b9c8-4e1e-a8ff-4cd4b3dc2fa0 a certain constructor, af45554c-7c5e-42f1-b9d8-f9370989d9ce because constructors can't have names. f9f01c16-0d99-4525-ba68-41649630c981 But if you have a constructor 3ff4c374-e09a-47db-806e-1b2dfb7e4864 taking this empty type, b46e5276-32f0-4525-99b3-3fca3ad03758 that's like giving it a name. df3dfff9-bb2b-4bcd-be43-f4684e85de49 It's A tag constructor. 2cfabf92-2545-440a-863f-95385d5f2707 That's the unofficial way to refer to it. 06b3712b-23b7-4c25-a63c-dcadd4ad8076 So, piecewise construct lets you say, f1ab8bc7-0570-431d-b5ac-01750c021664 hey, I want to call. 04c18d19-2bd4-4bd9-ae7c-7c5f43ae716f I want to construct a pair from a 8ff9b9d3-0317-4418-829d-96793cd76a9f couple of tuples and then crack open d823c49c-3f4c-4244-9662-f860037b21b6 the tuples and use their arguments to d7e59ac8-3298-4b19-a3e3-4c8bad85a162 individually individually construct 43d844bb-7c93-4f11-8189-3956bb439e79 the A&amp;B and we have to do that. 46f799d2-91d5-46b5-8eb6-8598df89885b And construction time. 961f67cf-d043-4050-8a7d-6b36d237c229 We don't want to go assign them later, 37321a0c-b5c6-4417-b3fd-8de0c5231578 so that's what piecewise construct does. 1421bd2a-2cbe-4b30-b5db-3dc4298bfbb9 There's other tag types that have 753bf097-c5fe-4473-b0bf-9fb35efcfe72 been added to cplus over the years. 7d6b1429-5867-4672-9fc8-8eeea61eab3d A couple more I can think of 1ab1137b-c697-481f-a440-c6dd383e2685 are was it in place index and T? c4d25f1a-c3e8-436e-b83c-3d9a8b83b7db And there's also in place. 7357af98-1349-4247-b2a6-dc445cb18a5d T Yeah, 26de57c8-8d9b-4ad5-93bb-e8dfd8e0c5a0 so if you're constructing an optional c79abf2e-fe04-4b23-9097-a5fe9ebb54e3 variant or any you can use in place 05de8524-abb9-469f-9ca8-b3475e73cbb8 in place type or in place index to c58e2207-6729-4a79-9a58-b30467f4d716 say I want to construct this thing 8dde8c00-f1ab-4a89-a7a9-d4dc0e257f0c at this index or of this type. 0d1af6f0-4a7a-468e-ad70-dc486b793b05 And the tag not only tells you, 8857b7e3-eb51-4549-af2c-90069ffccaf3 it tells the library which 2daf9da4-b099-434d-887b-2976d6b3d18c constructor you want, 7c273616-c88c-4ca6-bce6-e7d2d3147ab0 but it can also provide additional like 6d24e13e-2c63-4c40-b119-f9831bc3678c type information or index information. 914b54d2-c31d-435c-b232-2c5d58de7e2f So we're sort of retrofitting kind of b83b63d9-0a50-4c4a-9fb7-1f628c1c9646 constructor names through this tag machine, f5fa43cd-179b-4c30-b95c-86c76d76f6c5 so going back to 1206 revision 7, 0e38495c-76d5-4af9-8d4e-e6efaa7e1fbb this is talking about why do we f574d64d-20c0-4dff-9545-91d0adcbbd58 need A tag for these constructors? 840da302-601d-4b2c-b714-f11596d6c06e So let's see the answer. acaba6ac-f74a-4fc1-b2e5-c1fbef4a8633 Here is an example class template 87ef66f6-4e93-45c6-a900-b9990390da12 argument deduction if you have a 78cd0f67-5ff5-42f1-baec-d21c3e6f78d8 list you try to construct a vector. f5effa4a-89c0-4de2-b8cf-8c0a785a73ee Are you going to get a vector of list of int? 6fe26555-0064-47f7-bc14-bf8bfdb7dbab And that's what CTAD currently does. f8d5726b-2200-4584-a53f-e5a023f1bf0c And if you use A tag, e451d14b-5123-4570-b5a7-41162e40ce2b you'll be able to say I want to convert cd33c8c9-de28-4440-8c61-eaa8fa48e0c3 this list of int into a vector of int. d28a649d-1615-469a-a6d8-8c3dc5d0a828 Other examples where any absorbs types. 1f6640e2-43e0-45c3-b4f2-0c8f2d6f6b62 And different names will db0cb337-be93-41ce-a7f8-202b3a5716d8 resolve ambiguities there, 0a09aab3-4d0c-4ad0-a8aa-406a6ccd53b3 so that's why this has been 1b8a4f00-167c-494b-80c2-0d2734accfda designed the way it has been. 8431d06d-e681-4a28-90b6-5b23884cca5d OK, 0f4470e1-e67e-420f-8aca-28defbb193de so let me Scroll down to the 2b78a7bc-2110-4acf-b994-a5092d84ab63 actual proposed wording. 7a31861c-2dfb-4969-a52c-0b56afec2de3 There's benchmarks here, f8de04c2-8dfe-4e2f-9c79-9598d3742f91 and all sorts of things like that. c50402ed-ac32-4102-beaf-4a4762536060 Implementation experience I guess d539a243-735f-422a-8c13-dc558d9bc445 the paper is not actually 85 4912b4ba-8edc-4f4e-9a36-771252b9d66e pages of wording. af34440c-b3a0-4a9e-a9ea-3dae83e2dc33 It's only like 75 pages of wording. 90fdc270-0b24-48b0-aec8-99f92e854555 Proposed wording OK. e7e5f7e0-9bb2-46dc-a0b3-c773440d98d4 So this is a guide to yeah Kate 87713640-2dba-4fcc-9c9f-27ce967a2140 Casey's laughing because he's the one d36df59e-2332-474f-b3f3-f3b9a176c728 who helped write all of this stuff. 76ccff25-c8f6-4818-bad4-f0cdc9769da4 I guess I should be happy that it is 473c9172-a0c2-42a5-af41-08183f2a52f5 shorter than the original range proposal, 87302cb2-ffcf-4682-8371-9375fd5e724e so this wording is relative to a slightly 0e9a6e95-61bb-40c0-bf20-2c0b139b8e53 older draft of the working paper and 4885. d55619eb-e7fe-4b86-9b46-9a350137d315 I do have the current one and ed69f7aa-3079-4887-8601-c0d4c42e451a 4910 since as far as I'm aware bfa8bb7a-3256-4cf5-8ab1-2ce6f998159c this has not been further patched, ed86560b-e82f-40e6-ace3-9b028f546e49 at least significantly in 4910. cd727213-a93d-4456-92ed-a0ce8b9a181c I am going to be just looking at the 930d72aa-fa1b-4d79-90fa-dccc9ab546e0 original paper. This is because. fa31dc73-e75e-47e2-aad0-23a87d224a8c It's updating a lot of wording in place, ad2b4238-33b5-47a2-aa14-2499c02404d7 so I can't just look at like f70b0b54-98b8-4332-abf3-3d73483747d7 a newly added section. 352c69c6-2212-4e8d-a303-f694c7ce0f13 Excuse me in the standard. c8054840-d332-4a8f-b0da-2fded055c8df For, uh, 070a6528-cfe6-4fbd-933b-507b195accf2 what this is I could cross cross reference, 77f088a6-79d9-4918-8c71-be60e19b6755 but that's a lot slower, 535b099a-94fe-4884-87a4-436f2992a31c so I'm just going to be looking at this, 905adeef-b2fd-4e68-8cc7-9a1f6f982507 but keeping in mind that if anything 92271c2c-ab2c-4715-a673-f90fdfa52ae6 has been patched in the standard, 63aaf149-2e0a-43b9-9691-58c3cf6ed92b that could be a potential bug. b22f50ba-2d43-4164-b53b-69a8c4a3be20 The nice thing about having a PR written 4cfb6718-ae71-4234-9da8-9388c7bd8914 by a Co author of the paper is that eba9c4ab-41f2-4308-906a-908ada0b16b3 that author Casey is presumably aware of. 3da660b1-f37c-4a67-b707-c2523aacde5e If this wording has been patched later 218b9c56-9667-4779-b569-03069748f541 and would have incorporated that, d08f2a88-0247-48f2-848c-cab6a991b645 so I'm not too concerned about missing 9a189a0b-ceb5-48e8-accf-11d725cc22b9 last minute changes that have been applied, ada5727a-25a3-4fbc-9885-283629c09496 but if this PR were being authored by. 119b56a2-13e1-4ffb-af07-ee9eba92f866 Somebody other than an original paper author, 517f276a-1236-464a-a3b0-4e7d86180c3f and if it had been a lot more time since a95f3513-9304-4300-92a7-d7160f5528b7 the PR had been merged into the working ad48b5e9-cf13-410f-a9c0-9ba673a40d90 paper versus when we were reviewing it, a952548d-2c35-48f0-a823-c72ef76fc15a the chance for the chance for Divergance 629ad17a-a16b-490e-84d9-01fdf06ac6fc where the wording was further altered in efe0f807-13a6-4ce5-8add-2c5a4355fae7 the working draft and would be higher, 5865dd5e-2bd1-4e1e-8ab9-f7b6569ef17c and I would need to be much more 19992409-4de7-491b-a2ef-2897707467e4 careful about double checking the e1f805f6-fbec-4206-a8bc-28cbe1d779be latest working paper and making ce70de88-b8c0-49da-8185-3486658ee02a sure that it's wording is actually d0c5604d-a4f4-432c-b816-852a37e89f73 what is being implemented. 073371f2-8ef3-48b1-b6c2-173c23078cfc OK, so that's enough preamble, uh, 04abea32-a2ab-406b-a99c-3a05876363c9 let's go ahead and start reviewing this. fb5f68bd-9cbf-404b-af30-c32fe3b44432 I'll be mainly focusing on the 654bc69a-abe5-49d3-a33d-20de2eeb1e7d product code because the test code 5c2b4946-02ff-462a-9041-f32bd22b269a is extremely voluminous. 0ca25c55-194f-4025-9c39-218cf2597fea I might take a little bit look b58f6cfb-753c-4991-9d65-82a1847645f5 at the test code, 1ddf4a01-fbe0-40d6-9cde-1d29639fed3f so let's see if I can split these windows. 43da75ab-e2ee-4e36-ad7e-e7d271a86d99 OK, let's get rid of this working draft here. 1fc44341-a32c-4831-8877-e22e626cbf87 Let's move this over here, OK? df0e479c-72cf-4872-b2c6-41f83c1a51bd Only 117 files changed. df27e078-b301-4ecf-a991-7c8001c02f85 OK alt Click to minimize all of the. d7b0a050-dc6a-4627-8f8c-374eec48db3c Files that they'll cooperate. b96fe98a-69bd-430d-ad8b-811a6f2bfce0 OK, 5bff46a1-41cc-4e6d-80b2-0eac3df09e6b so the product code is not d96dcf0b-54aa-42d6-a2d5-c9ed4133ed5f actually 7000 lines. f1f0d16e-0f2c-4d3f-9039-2312488271c9 UM, there is a lot of tests being added. 879e3321-4729-49bb-ab2f-34c204fe399d Push range from range and so forth, dc26aa63-92fb-416a-8be6-84113168a9b8 rather than just adding a single mega test. 3ce4dd52-2b7a-43aa-8cc4-3d95b755948f OK, excuse me wow that is. 8196207f-3afa-4759-83af-9bf0b166187e OK. So let me take a look at 0f435d3e-b045-4ba2-b7f3-ddec770f070a the centralized stuff first. 9b137ef7-b4cf-4d1e-9445-415318a9b732 That is a lot of it. dda20510-f10e-4924-884a-0aac3ce5e47c It's, uh, that's test. fe4b7b8a-cb82-4962-a417-b48a38ebcdbb I'm looking at OK. bf4e0799-89bb-42ae-b7e9-7114275b1fcf So we've got a new paper comment being d4690402-fd03-4b55-aa8b-1bf66931a8e2 added here because we record C + 23 features. e66fe198-52ad-4f56-bfc2-a6e5b64d14ae This is indeed P 1206 R 7 conversions 3ca988de-4876-4459-bba9-10103d10f66b from ranges to containers matching 13d8c518-c2da-4a12-a290-9ae3e79129fd our cleaned up paper title. cdbb5a0c-af30-4d8a-8305-da85e1b80d63 It is in sorted order under 23. 00fc374b-37f1-4763-ae76-2f03c5e5d1e2 That's good. We now have a little ffd213ba-dfd6-4182-994a-10ae91e227cb bit of white space difference there. 06b9198c-bfa6-4c29-bf53-f1b0f5f68c12 I could ignore white space. 86608d8e-320e-441f-92cd-0464d719f7a4 Why don't I do that? 1e07cb91-4418-425c-92ca-595eb6af5ab1 Gonna click on where is it file? e815be2e-1436-479c-9281-a0c845395288 No not file filter. 63740331-b7e0-40d5-81bd-0f00972b7d7d Is because my window is tiny. c90b4d48-c6a4-4c70-b890-f6237242c3e4 I think it's under the gear. 4daddbba-f3ff-4ee4-bd41-8c2d45d5669c Yeah, yeah, there you go. 1739bf35-05df-4184-8a16-c94c4c661ad8 I was I was a little confused because the c43b3dfd-acfc-4d01-9cbf-117d8c27840e window was tinier than I usually work in, 7b1a226e-922b-422e-b461-9f29de9c4111 so it's like where? 400ee955-89f8-442b-b109-9a4db50fc8ea Where is the UI that I usually click? dbccbee9-54d3-42bb-a5e0-ce82156a5c17 OK, there we go. e301f8e6-f148-4cf2-a609-87aa2cff94f0 Now we're ignoring white space d524934f-dc3c-4337-ae57-083f5b303458 and I'll re minimize again. d66b4e0c-1ba8-4bea-abfc-6f066664eb4f Why? Plus core great. d3082679-fb8e-4872-9ef7-d7c50209cee7 Still not realized. There we go. 9548c6d9-39ca-46e4-ac84-b6edf6a4c784 Oops, I don't want to maximize everything. ad20bd0d-9aac-4486-bdab-eb39e7229eb6 OK, so probably six or seven 53091c1a-2c03-4611-965a-727353cd3e56 conversions ranges to containers. f9f3b2e6-2988-4136-8ad0-36dd58646e86 UM, claim formats indenting expected, dae16f85-106d-424a-91a5-a43618920b26 which is the change I didn't want to see, 15242f00-fff3-486f-a963-39c4f0f27841 so here. fc1bb892-a582-41a0-be6d-5d40c8a66e5d We're adding one of the 851a34a1-7947-4d55-a6fb-6aa65fe06975 new feature test macros, bd048899-d0ea-453a-ab6e-2461cb12fa71 CPP Lib containers ranges. b372f146-b416-4cc6-864a-8b9a1df0e264 These are separate because in 2b1701a7-d593-4dfe-a6ea-5b86b0dd600e theory they're like two different 8759892b-da48-4028-83e5-6f97c1c2f8f3 things being added at the same time. 9e995e49-fd74-495a-9313-a6234a01d5c5 They could also in theory e4633ee2-442e-4a01-9a18-1f827b00ecc0 be implemented separately, c4dc86af-f76e-4c48-9bdc-a6e13ff3249e but they're being implemented simultaneously, 350f9376-ae90-4383-b717-3e73804fe210 which is great. d94bfc18-f36c-4e24-8f97-889adcc879d0 So we've got the new feature test macro. 4fe1c8bd-b916-4fc2-85b8-f2aa53a29d5a It is this one is guarded by CPP da60b552-f32f-4327-b5ae-fc3ba18cc902 Lib concepts because ranges is 585232a9-dde4-4f51-be71-0f52de5e4ced typically constrained by concepts, a1868777-217e-4487-84a9-f412be1407d1 so that is expected. 20f405cb-c19a-4443-9b32-ed746e4e368e It has got the right spelling. 95697bb5-ed40-4c2a-9ca9-a96b62fd1fe9 It's got the right value on February 2022, d7fcfac0-2b17-4ec2-b96f-c782c3c27d1f which is when this was voted in 68fe81ec-45c4-43d7-a453-cf255131c7c2 and then this is in sorted order. 13abec1c-3071-4e19-933a-20f37af716dd Con S followed by con T and 58f27dfb-7be4-4d95-99ad-55b2251dd3cc then expected that's good. b2df920b-8bfa-4e90-91f7-359167d458f1 And then the other one is 10bcc2fc-f466-4895-925c-079abca5e14a range is 2 container. 3c7905f9-43a8-4155-b758-38489064ca3d Yep also guarded by concepts S 604140eb-6eb4-443a-b5f2-b6c7ea4d264d before T good sorted order and. 72e3e0f2-5ba7-4c5b-bec5-a40d25c5e660 Standard value yes, 4c998aca-7fd2-4a18-a17d-ce1ef4eafe74 and nothing else needs to ae6b99c7-5e27-4868-97b7-7767f30ca3da change in rivals core. eeabda83-26c5-4b12-830c-b11b9c3a7e26 We're not adding any deprecation 03ebc22d-d409-41c0-a5e0-dae365a7f5aa messages or anything. 17496796-8427-47a5-b99a-c52161cd1f30 That's good. 7e623b46-f5c8-4c4c-b5fd-22813388f294 We can also jump on over to ba035664-3a48-4abe-b3b1-cea1421b6149 the feature test macro test, 3fbd3907-cd57-4776-8d99-f65245408bf2 get that out of the way. faee8f15-e2fc-460e-a279-125d167ea34d King spellings all of them are being updated. cb7a7e79-d2b7-43f9-abd9-38a264344a73 They have the same value here. 79b44fba-1c6c-4c14-8e79-4c532f5cb8b5 So Yep, that's all good. 6f50a4aa-63b0-413a-8aef-0cab58f258f9 They are guarded here. 60e38b32-0339-4130-b961-86a8d4a920b5 I'm just checking with their guarded by 74646e58-baec-493c-b0d9-8fa962f7d806 their CSS 23 and not EDG because EDG does a14cd95d-bb84-4655-8464-7531ef02b081 not yet fully support concepts for us. 19c60b03-0903-4f77-a00f-8c6dd40d6297 Yep, that's the right transition message. 0eeee2df-32bd-41ca-8b86-3a186f1d5fb8 These are also in sorted order 38cfab8f-834e-4dcb-bacf-ebe544c90a17 con escon T Co routine Yep. a7dc20ed-7b65-46b7-a320-c76729d0efed And then ranges 2 container ranges 6922c3ac-b80a-4bfc-a878-9745bcca259a as ranges T raw memory algorithms. 7b7c18d0-7ddb-4e7b-a786-4309ea35112e Yep, that looks good. d62841ed-0a3e-4705-8bb6-e9e9f468711a Feature test macro test is updated. 10256725-a0cd-4a88-9311-36e3fdfc6974 Uh, mentally thinking. 666a1cf4-ede8-4f40-8abb-e7c9c549dfd1 Is there anything else that 5b82a5e3-37ac-4974-8444-af089812eeeb we need to update? 24b947d6-256f-4775-be90-250c6c0fefa4 No, because we're not adding b386dade-19a3-4e35-9a72-265293a7a7ec a new header or anything. f7553e4c-604e-4475-bcab-45b1af3e1cb1 So in that respect this feature is simple. c4de8ed5-978b-4a4a-8cfb-a2d91b34e6db OK, so let's take a look at the product code. 31c8eb0c-1e9b-4ec0-9b46-ff8c32c54833 OK, there's some changes to algorithm. 99f59ebc-b459-41d3-b67f-86658e2330e5 I would actually like to bfe7c7c2-6846-4030-a50c-8a34d5abe64b look at the description here. 4012d317-2b3c-49f6-8d0a-d9ac5f6c269f So in algorithm, UM. 59cec7ea-b925-4419-aa43-f20d495e47ce Promote get final iterator unwrapped 6ebd5f19-908d-418a-b78b-0c93e8e0c746 to X utility from algorithm and 43914450-848b-4c79-8352-9823221306ed then add more stuff to X utility. b3b08fcc-4832-4b73-8aa9-011b3eb3b19e OK so code is moving around. e536ae0c-501e-4103-804a-dfe087b5cef9 I love to double check code movements bf678210-ca0e-4394-93fc-27f935fd4613 because that is a wonderful time 915bdb6e-eb8b-466a-8070-39271e8f6078 for things like merge conflicts 1167bb1d-e616-47e5-8926-0787a9a2f690 and other bugs to be introduced. 8e60f9b2-d8d9-4d79-94c2-614e0152c7cc So algorithm simply removing this code. d7a82eca-f42a-4a3b-ae23-1df0841f0a10 What I'm going to do because the built f67f4cb8-7abd-4a4c-ba86-8485b609d5da in Dev doesn't handle this is I'm 39f09ce2-d067-4eeb-a0ff-0ba9d79f56b4 going to copy that over to my editor. 2edc90ca-31d0-48a0-a89b-c8d9db22eb8b And I will handle comments. 30faa7d8-d109-4343-8668-ffbeba0fdb08 Remember what this is? 238f9b5d-c9ae-4c7e-8659-ed3962a38a51 This is old from algorithm. 5b0c0ec8-b48d-4a73-a92a-05c1a4842588 OK, then we're gonna go over since that's 153d4c56-e880-4761-962f-a81519b8af74 the only change and check X utility. 90865a18-1152-4156-9494-09daee07f2f1 And see if we can find the new code. 85732b61-2edc-4443-9b29-7b42ba2f59ed Uh, well it looks like it's here. aa128711-d698-407c-9bd8-aeedff19e881 OK, make sure the context is the same. b508db3a-c8b1-449f-a5c7-9e3299e5a770 We're clearly within 20 because bf6d4086-c524-4153-89b8-6f8e3ae46408 we're mentioning range of stuff, 9c880a84-b06a-4322-842d-3121d2df6ff0 but we're not specifically within 23, 31eb5bd2-ee91-4279-88e0-999338d6a16e so the context is good. 85f5d1ea-7217-4c7d-912d-55ad3a264e63 And let's copy paste over here. bf94b5df-9d2f-4933-91a3-9ef5cc300fc5 This is new from actually utility. 4f0e5395-5b2d-4838-a8b4-a42e838ae107 There's the code is that the 22448388-d984-4842-a444-27c7b6f135e9 same level of indent? It is OK? bf4d970c-bc8d-458e-8d67-3e1df16f490d So then I'm just gonna dip them. 65fc011a-d233-4928-a8bb-9f14c0b65f67 And there are no differences. 443c4f8e-423d-4a11-834e-302e1227f898 Wonderful, so it's pure code movement, dac40e33-f8cc-41f0-9474-2cfdced129a1 nothing else being introduced, perfect. 94193070-4842-447e-a25e-a9c6660cf4c6 OK. So I trust that edit. 1630b868-bb1a-434c-a0a8-42fe17860b91 And we've got some other 9d8a3e8d-95a5-4984-8516-8e89b89d240f centralized changes here. 9c6bc871-ebd3-493c-93bc-f834ae8ea692 I think I do want to review the 4739c605-05d4-46e8-80dd-bfd0d9783a04 centralized changes before getting 730d3bfa-5447-4d79-9535-2a60c913d7f4 into the per container changes, 8b45fb89-deac-4694-a891-ab72290c69fa so move this over here. b6e4ddfe-360c-4899-a4a6-044e462f5ebd OK, so we're in X utility and X utility da65b5c2-9de5-473f-b7be-f2005bc1f875 in addition to promoting UM and copy c7bec8f8-af2f-432d-9ec2-55d5fbb0078a memmove N and copy and unchecked. 082259fb-8ad7-495d-b3ff-18f94ffe6510 Similar to copy memmove and copy unchecked, 912beae0-04bb-41c9-9445-68a55c9c6b4f but for counted ranges. 08404ae1-51cf-4d30-aba4-1768ea22ca76 Generalized inter copycat f0537b6c-92e2-452f-820d-906183219ed6 to Sentinel copycat. 7a1de34e-079d-4304-8ae3-e7e4402cdb8c OK, so actually tility. 03689596-37dc-46a4-9855-c94f8ac01ea2 We've got a drive by cleanup here fccf63ce-2afc-4c4b-bd74-dacc0376e501 fusing together namespace ranges. c8c100ea-4dbe-4703-9f3a-8fe57635297c We were just closing it and reopening it. 1fb65a9b-452c-403f-9c72-34f49683cbb7 That's totally fine. 8ece0ba2-f5a1-4b78-99a9-6baf0ed4570b We can handle a little bit of c87aa1c0-6c35-451b-a65d-bb8c55228033 drive by cleanup in feature work, fb7dfa91-ef3b-4c39-885d-9822774252e6 especially if it's innocuous like 2b3751c1-6366-4072-b834-9647f6711927 that it was a larger I would 82c77576-50e0-47e8-b3c1-0363a66e0ee9 ask for it to be separated out. 266b474c-5480-4bfb-9e5d-2174534131ab OK, so here is the. 727e50d0-a6b6-473c-bd64-1cedad44e97e Copying memmove N for counted ranges, 67cedacf-d7a2-4987-a17f-723015e8fb92 so we need a contiguous ea242d2b-cc53-4c5f-95a9-0ea89d72a0dc iterator and the size to count. 630d2947-8292-43b2-a45b-4d790ff8614d OK, so let's take a look here. 133ae66e-e049-4ebb-8d2b-77febbb52969 In the context we can see we 5e225c61-e3a6-46e0-9b63-0e426c968578 originally had a copy memmove, 916fc318-f0a4-45a4-be11-896102bf3705 as I recall. I think it was our 9b85b3c3-476b-464c-9225-1e3a673569f4 contributor Adam Busier who. cc63095a-b212-476f-8761-778a8dd94f5d I extracted this and polished it up, uh, 0ef58243-deff-43bf-8e38-5181c3176838 because previously we had a more like, 4f1cf28f-f7ef-4b73-83f2-b8cad1619c28 uh or more special purpose version of this, a7ff23c5-1360-4c2b-8a89-13c0779850dd and this is now appropriately generalized. c8e1c746-03a0-4fde-b6b9-3a04fc37db00 So that was a very nice clean up and d7874e69-86ea-4513-ab8b-8d49bceda042 we now need a different version of it, ce3d1e63-e0fe-41de-9bbd-9cbbf87715e9 because sometimes we have a ce6cdeef-4b39-4d8a-b93e-73dd57263a02 contiguous iterator and account but 2059e86b-2e9a-41aa-a2ed-f885a9d02b77 not two contiguous iterators and. a637e512-80e1-41ce-a2e5-6fecac11f1d6 Why can't we simply synthesize a final one? 1eabcbf8-738d-4b57-9e8c-47ea254fa855 Is it purely for micro optimization? 310f3556-0604-4365-b64f-b049babf9c6d Because if we if we believe that 90502249-6ec2-4fed-8ed8-9084f5d7b3fb we can do memmove. 7211e355-c681-4ace-b854-1c2bed7228c7 And we can convert to addresses. 3ac73f9b-e3f5-41cc-9f85-5b43393dd1e3 It really seems like. b77434e9-8ae5-45e3-a3f1-1202de5c15e2 We could implement one in terms of ad8dc2c8-2a3e-43ac-861c-d360dd5b92c1 the other if we weren't just calling 30a09c1e-af6f-4243-926e-fa512edcfa67 like move and we had to do some, 1c70457d-008e-425e-b93f-d0ebbe2d09c3 you know, arbitrary operation, 35867dd5-9c3a-4f6a-be00-65f56311f477 then calling one in terms of the 52d40ca1-53b0-47f9-b01a-b6c52e719837 other might not be possible. c2ee96e7-c942-436c-8729-d1b8f45b1890 It might not be efficient, e2c80e18-d4fc-40e4-8f83-95781e568fa6 so let's see if I can answer this myself. 6caab832-00e1-437a-b637-38073b6c7a2a We confirmed the address, ee5856b2-7277-41ce-8904-1cb24dbc3c0d we do a bunch of cons casting. 6d96d05d-39a6-4f46-9b9a-02db6e2a840a OK, so the difference here is that 7e7ceba6-2504-414d-93a0-026afedf32b8 we can get the byte count by just bd27b646-4c86-4055-bbfd-1f3053653de9 multiplying the count of elements. 89ae703b-af1f-4579-99b8-b11fe3966ee2 We multiply that by the size of an 32446213-1b37-4b3f-8f72-6c1e98f05c6c element that gives us the number b99f508c-a29d-47f5-9062-d86fea4bf6fb of bytes to mimic if we. 693cbcdd-294c-4319-923d-6d63b50144f5 Implemented this in terms of copying memmove. 500ccc10-7004-45c0-8387-9331020a2dbb We would essentially be doing pointer a098e3a0-596a-4271-b89f-4b3824c06760 arithmetic or a multiplication and an 23cb9b5e-afbc-40d5-8b03-94b95fc111d5 addition to get the last contiguous 54baa3ca-7fc2-4672-90c8-ddddfc1924c2 iterator for pointer and then doing f1e67e88-d93e-4ed2-86d5-04c3ba234450 a subtraction to get the count. 9baf5d79-b3a8-48c6-bdec-0bf963500e39 Here we can sort of bypass that d8de0ed9-2d3d-47dd-ae44-cb32c155adff we still need to synthesize. 4032aea3-0379-4e8f-90d6-257f1a70d585 No, f9d46e32-1fa5-4620-8965-a4fb9f7c613e we don't need to because copy member a357047f-cdad-467a-842b-55dc33e57344 we actually just wants the account so. 9e838c16-fa5c-4b43-a3a0-807264660aec In theory, it's very very slightly less work. dc994284-8ab8-44a1-be55-1ca34cbbc1cc We're avoiding an addition and subtraction, 94adf86b-3d59-4f47-89f5-6716960f147f UM, deebced1-7e8c-4cf7-a602-72a1a2f6f932 but this that subtraction is just a2bfbc38-fcb8-4fea-80e8-a185a3d98d4c in terms of bytes anyways. d668c884-87df-42ee-919e-23d1809673cb We did really care about micro performance f436a722-ef38-4392-b349-d04665f002c1 when we worked on the original copy memo. c0787251-c87a-43d9-9d5b-46d45950d4a7 That's actually why it's so careful too. 1be5e95c-2d57-4ac1-9834-adeb1b531969 Once we've got the bytes. 03fdd462-b592-47af-8042-5fecccb6d522 Once we we what we do is we separately 5b376f41-73b5-4726-9520-c6a3e67e4e5d convert first to a pointer to care 0962ff71-902d-45d8-880d-b772e647c77a and last two pointer to care and 3ee0dc32-0641-4964-9e06-c48bbac44904 then we can directly subtract them. 3d8534e4-79da-47bf-a136-95f102cf7a05 We don't need to jump from the bite 09d2287c-1e0e-45cd-9ad8-a19af691a317 domain to the element domain and back c077c99c-5c83-4f05-b79d-d671692e4543 then move once a number of bytes, 9ee647ef-ffad-4bcb-be68-107fea955a57 so we can just subtract the byte pointers. 1eccadbf-35a0-4b2e-8bdf-425224583c9e That was important there I'm less a9d85d0c-20dd-44d1-b3f2-f218ee93a616 convinced it's important here. 7d4baabe-3e24-4848-b0dc-74212f6e80cd OK, I, I will now call my lifeline Casey. 16cdc527-d13a-4ff6-ab1d-a434a085392c What are your thoughts on why this is de23c6dc-2f85-49dc-af09-bce94bc2a1e8 a separate function instead of simply 1b7b0d8d-58f1-4ccd-b39d-f311f12c91c1 wrapping or just directly calling? 9dbbe84a-7a7d-4b09-a02f-c852479616da You know copy memo? ff05f316-5a6a-4424-88ca-00968abebe1f Was it purely for micro performance? e6cacd6f-2fa7-4521-a285-b248577f1ff8 It seemed really important to me at the time, bfafc5bc-1fc7-4746-b675-38521d600818 but now I can't seem to recall why. 82e9f29b-6e40-42ad-9e63-acfd53bc5e0e Yeah, it must just be for micro optimization. 5df5a195-fea2-4dcb-977b-6cc8757ff9b1 I can't see any other reason for it. 25925aa1-e1ad-4721-bee6-96fd928a5eb5 OK, yeah, my feeling is like multiply. 6a4d0f05-7f84-488f-bbf4-7d3f631a673c Yeah, saving us anything major like the cdce8d9e-6d3a-4fad-89af-970fa7b3e98b way we save our division from from doing 0515b983-f995-4c21-a48b-485d914c4950 whatever pointer difference from the 3960e243-6c31-43a6-bf3d-d239ebd81510 other case for copy member. Yeah yeah, c30c488a-abde-40f2-b1e7-48d589703118 because the original one was if we. f19c09ab-d89c-4dec-a2da-c546f0741fb7 Subtracted the the original 7ae49545-bc83-416e-aea1-39ba719c5cf4 optimization we applied here was. 9134d1a7-e2c3-45cb-8de2-1fb6a4cbfc23 If we subtracted the original pointers, 8b6439c3-77d5-4ce4-875a-dd3fbc5a4505 we do a pointer. 8217336b-3e5b-4227-bf55-7c8c9c82f29c We do pointer arithmetic, facd40e6-8c97-41d1-899b-0361013aa291 which is a division by a constant 16d4fbeb-fe1c-4231-a6e8-a15756cc9868 value to get from number of 4c24bb40-ef39-457c-881b-3c285b5e24fd bytes to number of elements, c5238c08-74c0-409d-8cea-cd979d1c1a44 and it is a constant division. 8fa80117-215c-4940-87f8-bc9666593911 But if you divide by like 12 or 13 or 0dc75b05-e2db-4d53-a739-1c84123f2640 whatever horrible size the element is, 907d96fa-369f-4ab4-b08b-a562c77835e5 the compiler will have to emit a 6a6e09c8-c8bc-4e53-aa09-40d71e8df992 bunch of magic multiplies and shifts, a5f08d18-df25-4b50-9b82-f977e44e5b62 and it's potentially slow. dfbd6391-0072-43bf-99f4-a9bcc68c4bb4 When all we actually need is just 90d9d80e-9b52-49ae-87f3-a4ba4da058bf by subtraction. 7f6ce2b8-ee5e-4219-808b-fbbcfb1b7bc8 So yeah, if we really wanted to d7f0aef7-4d25-4fa4-9154-299941d1cc6a kind of bytes in the 1st place, ebd94fd6-8182-4c33-be52-d8d44d7492b2 it's it's unfortunate. 2e4d1d16-4ad5-4ee9-b733-c1dc441b6895 Yeah, 95df4e93-cb4d-49d3-adb1-e8fd5df6c992 it was purely wasted work and 097ea1d7-f2e5-4592-a1e5-ec4d3c0f064c it was reasonable. 45c9fae5-8692-4a2b-8428-773c3a52f230 Like we're avoiding a number 9e6ab930-9425-4233-925a-26d4a1620eb1 of optimizations, 450a9403-52e6-4396-8308-8ac7e7a1832b and we're only going to have one function 1ecc4cd7-a099-40fe-a87d-5f3e0d2058f1 that's called by a bunch of the STL. edb4f68b-3a78-476e-86f2-301841b534be We may as well devote a bunch b24a9e82-46a4-4afb-8da8-4a36d693aa0e of time to developer time to fc405bcc-cb4e-4311-a3ce-8c825dc377b3 getting it really efficient, 22babc0b-c43c-40fb-97d9-62ae04c314cd but that's already been done here here. 26fed906-c63e-4dc9-9957-ebae40f1854b At most, 4155eceb-69a1-4b9d-a02d-5f90dd8213f8 this would be avoiding like a subtraction a7e3fb69-36d9-46ca-8ca3-55d673d73338 and addition and an optimizer actually fc56bf6f-9f75-4a25-82ca-b029527ef135 probably can see through that. cb8d25b6-4d63-4856-9301-ba7835d095c2 Or even if it doesn't, fe4b9da3-8bfb-447b-b9b2-9fc2d6c67ca5 it's one subtraction 1. 12d018df-7c9a-4f65-9d66-523252bf493b Addition. 492b2cb1-2042-4456-80bd-687e69aa504e I'm thinking this should probably just 00c72bfc-f5cf-455d-a7fb-458172fc59a8 be implemented in terms of the other one. 13bfc258-a56d-4dbb-afff-2b159fc6c7b7 Unless we ever find through like you know, a7b6d46d-4f7d-420d-adb8-da644707bc63 profiling that it's a big deal and then a90dfb5a-6f2e-48cf-b6d3-2a457349c2d9 we can go essentially restore this code, 926bcce2-1e69-4a77-9b51-5ae4f0e34435 but this seems like it's sort of duplicating 23a0c602-2b9f-4c05-96a2-e2c9c2778ee4 the amount of code we need to maintain and. 1a9ba8e1-6baf-4c2d-bd90-7df2a12bebc9 I'm less enthusiastic about that. b1ae99b4-568d-4e08-b916-689dd219e7a3 Especially if you can no longer remember a7da2da0-e6f8-451a-8bb2-61e6ba647119 any specific motion request from the e903540b-1f25-4540-9c7a-1befa08aedf6 author that they justify the existence 02e5dab6-8f2d-40e8-add4-92c95ae9e321 of this separate thing or get rid of it. 0cd05fce-465c-4326-851e-fc0c56d0d3fb That sounds good. OK, I will add that. 220c6685-2e41-4b1b-a1f2-381daeee412d Umm, OK so uh, let's see. 99f25fe9-db2a-4b00-a23e-3b58a4e2d53a Because we're working with ed1370ee-4f59-4ddb-adaf-bbba6a9d91fc contiguous iterators, this could 6bd8bcae-506b-4192-b0fe-fd94ab31c1c6 be implemented. By calling. b1e3182e-fb8b-4659-88d0-7b96eaa5446f Happy man move. 81f27191-4ed2-4f70-a863-3772997d2db5 Of Umm 258d6bce-df75-4331-aa6e-6455b321d8e2 the there might be. A. 823d10f9-90c7-4fd0-bb7e-b50f88bce14a Alright. If we did that, d5ee1c18-ff8a-4de7-be8d-082172619c07 there might be a little bit c736b661-1fe9-4b4d-986f-d1ce2cbbd71a of unnecessary work pointer. 2dcc95c0-c0c2-4b9d-b69f-09b450cd57a0 A dish or I'll just say 3c01a044-bda0-4ad5-92ef-c7abe11c4541 addition, subtraction. c824ac65-7b01-4d62-8a26-26fed5810b05 But nothing. 56e904de-22dd-425c-9c2f-121623671e75 But there shouldn't be any significant fe925f9d-0915-4f21-9d9c-7954ca1d83a8 expense like a division by size of T. 41069f84-061b-4096-905d-875e747bfaee Can you either justify? 8ed0339c-4447-4e92-b3b4-1952c3911194 The need for. 34c2f49c-18cf-404f-860b-4aeae435f269 Near duplicating the code here 170268ee-8310-4e96-a81e-56438b0ae13f due to performance considerations. b869c041-c8ad-4e7a-b89c-fd5d259cb732 Or simplify this by implementing. 2bb7fca6-1d1a-4756-9b0a-76e5be65b305 Copying my move N in terms of. Copy memo. 27e49051-c396-428b-9d36-e6a2050b50ba OK, uh, because we're working 3e058c79-01e2-4e2c-9bc6-da7db5d376db with contiguous iterators. 7de4b479-f40f-4e82-b143-3a8fab12b34d This could be implemented by copy 8075a8a5-8809-4535-b8ed-96f35e5696f9 remove above if we did that, 5f2002f0-a889-41ba-a89c-149e92312f87 there might be a little bit of 7acd3698-795b-4a26-af86-73b0c8d97bc4 unnecessary work addition, subtraction, 48395a50-ac09-4d38-b3f1-f48413594b96 but there shouldn't be any significant e3e3350a-42c2-45b6-890b-35df5cfa97bc expense like a division by size of T. f0ef3cb1-eb24-4fd4-a434-c9d051b261f0 Can you either justify the need 78672358-1a02-45a3-b59b-52c416531ac2 for near duplicating code here due b224428c-d90e-47c6-8d79-b10459db9961 to performance considerations? dbed9b63-c1bb-4e67-9458-fc06e07a3d06 Or simplify this by implementing copy 48159c2c-f625-43c1-b1ff-013c22d85e61 remove in in terms of copy memo? f52fab42-295d-4ca8-8a46-17c94e8f1fa1 OK. Uh, that said, 3e670947-ef50-4fb7-be02-dcea4db68792 I see no specific correctness concerns here. a3e1df24-a414-41f0-9744-53e52a250a11 UM, we translate 1st and deaths to putters. 5dcd19db-a86c-4a14-8286-bf8d7c9be3d1 Just like above, we cast them over. 93d25bfd-a009-4ccb-8f8d-6f6bbb2db553 This looks exactly copy pasted. 9cc93bc3-1cb5-4fe1-9143-429f24e3a073 The characters we got to do a little 16bc136f-db1c-48d9-9085-4e06efb8293c dance to prospect constant and volatile. 1d7858c9-00d2-407a-9e78-8f5c716e16af That's all the same. 1fd3ddfa-8c5d-4ff3-acce-131919f85c62 Uh, we already have a bite count and 09d69bea-8470-496b-bbee-6986d857cb7a I very much appreciate that this da2d97d9-8165-40e6-8213-cd06648dff3a is phrased in terms of byte count, 2ffa8181-7371-44f6-a752-a3cb989a5daa because it's bytes a top way we get 2fb5c6b0-29e5-4d82-a982-707ad52404ae confused is just saying count or size. 05f38b8e-697b-4ee6-90ec-8c95c496e957 When we variously mean like elements 71202584-69ae-447d-92ef-d9a90612f476 or bytes. f28658ec-00ef-4b2d-87dd-834521f63388 By following the STL naming conventions, b879427b-ae70-4d44-93ea-2aa2f8216d37 if we ever see like counter length 83610a07-a9bc-486e-ac88-670149f29e65 or whatever, 5dfe0eb7-5850-4142-8b16-e9fdfdd899e1 we assume elements always in terms of 7e13549a-55b8-4389-b6f7-4faeb70b8a9f elements only if something specifically dd6f7766-6c88-4902-8f69-769798d1c00a says bytes are we dealing with bytes. 982818b0-ca30-4310-9827-b2842986190a So this naming is good. 60ed2b18-ece4-447a-a22d-5ce18ae6a8dc So we would take count times the size 704506be-3d3e-4a9b-9214-3fba1bcbc889 of whatever do our first putter is, 7bfb70c7-0ad2-4e75-87bb-58164bdc1e34 so that's how we just get the element type. 7fecefc3-55b4-48f1-bb5c-76921f994547 That's fine, 81a253a1-bd45-4dc3-a041-15eada6e255c we costed memmove with the byte count, 771f837c-5334-4534-9209-317796f2bcc3 Yep, destinations first and then 3da4da4d-6a9b-45ca-a6ad-0011d8d4de3c we resent the size. be35c549-2060-4094-bf44-5ed575313bee OK, so if we do need this function. 2a553c64-ff2d-4d15-95a4-b4d00ecfdee9 This is all correct. 7e1dce80-f958-4f7e-8de5-0f75c9d7eb46 Yeah, we had the bite count there otherwise. ed306a54-64af-47e3-a815-6a7ed968cf45 Let's see here. 030b644c-d71e-453b-863a-3e47754b5cc2 We already have the count, 3aea2d03-6246-43f6-9c4b-371cdda603d6 so we static cast back to the. b7590f0b-a96c-41dd-be1a-3a827fa6f627 Iterative type of the contiguous iterator. 076ee9c4-32c0-4b0d-9e57-6b176ca8dce1 The out contiguous iterator. 76c2de4c-f1ca-4fbc-b0ba-f80b6ecf1faa Yeah, so if we need this function, 7ce1eb62-8413-4136-b771-b7d3f3231844 this implementation is correct. 54f27a16-579f-4c6d-9bb6-072925285573 OK, 36b61aa1-4374-47ef-a05d-011047e4809b Next up I'm copy and unchecked, b99dda85-a4c7-4b19-9081-89153f2b584e uh, this is being added similar to cd573b07-f07d-497d-ae52-a63001084368 copy unchecked. 9309ef82-5902-4b38-9486-a5688ce96b36 OK, 3ce28955-df83-472d-9cf6-4b81a1f3c5dd so this one is different than the 668389de-14f4-4570-af2a-9693f9751deb one we just looked at because it is 0eea9e18-37af-4d1c-a08a-90523414e8fd taking an arbitrary input iterator. 2dc61437-052a-4338-bc21-140c865ee8e3 So the same concern of can we 9bc67ce5-d642-4e7b-bcda-37c97b2c6e42 just implement in terms of the d352095e-c561-4d4e-bd81-81c62dadd0ac other one that does not apply, f9aafeee-5e5f-4346-b5e7-52f3e9e0e7c3 so we actually do need this one? 3c44cfe2-4d11-4460-8f52-2f7776612807 As far as I can tell. acc616a2-e952-4d2f-989f-3d65b5a9f15c This looks like an edit, e7113bc6-5816-4779-b636-40141c200a6b but it's really just moving this 7f25d21a-0615-4908-9c3a-6a01ca7fbaea code down here and then there's 2ffc05dc-fe1b-4b17-aa2a-8bcd070cfd26 some generalization down here. a9ab0b60-e4fe-4a0b-8133-08c85ece7f40 OK, so. We have copy and unchecked. f133a307-11e1-4108-a181-c182eefb0cb9 Has the same sort of signature, 05d0d902-7c65-48c1-af57-e7164ab66682 but we take a size T count. 94ac2052-f296-4e30-a7e3-4d2a9e682b21 Always size T because that's. 75b3c202-1ad0-434d-bf2b-5874f982cd05 That's interesting. 4f3f674f-fe5c-4668-8912-ddf451b08617 Why does copying insist on size T? 2886985a-e7df-4a11-8692-879ddc2d8643 Usually it's like some sort fd36bb7a-56d6-411f-b757-438e0d76e299 of iterative city thing. 7c390515-3bf4-4e94-bfd9-b155601142e1 Difference type sometimes UM. 6559f770-cf4f-460d-bdbb-18a3bd7f8173 That's quite interesting. 10292453-b60d-4848-ab92-26713d33324c We do pass to copy memory, 158305b8-b858-4fb2-8e12-5b03a7599bc3 but of course that one has a f192827e-af9c-4b31-b6cf-35af482f9156 reason to insist on size T. 20816bb7-30f6-4f83-b5f1-51212a7daeed But for the arbitrary 1. ecfbbb15-db5d-4217-a343-09086bc10434 It it is pathological that you'd 53d8084a-280b-4405-8573-a26984d53db5 have to be on like a 32 bit system 119da79d-bb5a-4a85-8a1f-70412d56579c and you somehow have a 64 bit count, 83a4da98-f1ad-4092-8408-07eacda38fe8 that's not gonna end well. d1191d41-79b5-4d60-87df-d1a0fd2b5110 Well, no, it's an input iterator. 796fbb06-8a9d-429a-8fa7-15eb52e5b76f Or I'm sorry it's it's writing to 50415c1d-a528-49dd-8035-c22f7ef099b4 some arbitrary output iterator. e6a44289-5ae6-43ff-a6c3-8370e7b0a200 In theory, there's nothing stopping 204a0427-295c-4f36-a26b-9f8f83fadba2 you from copying like a file. e62d109e-df4d-4277-8871-f4e40402779f With this saying I want to copy 92f4ba9b-28c5-4ee4-9af6-2d51485b7d40 5 gigabytes from a file iterator 005c44da-3fb3-405c-987f-9a08cd82b5bc to an output file iterator. a566cc84-f7cc-4b71-9aa9-5d382fd3bd9c Here's 5 billion. 3a66b42a-5f2f-4d24-8d24-2345ed97dab2 That would truncate on X86 or 32 bit. 24833f8c-e913-41a5-aff0-787a77cde021 This seems highly suspicious. f87e2761-a16c-4ebd-b847-0003d5f15e15 I don't know if I like that. f1d8a638-9e5c-4546-92f0-859b3e55b423 I wanna look at the usage, 2a381a2f-195d-4290-bafe-922a424e6d58 so let me actually, uh, 5ae3fd3a-d604-471c-9460-14a8c5a00098 I'm going to to do a global c223cc1a-8325-40e2-a342-45bc891d40bf search in my editor. 1af9f08c-5896-4404-9f88-6023a5f78374 I've got my repo here, so I'm going 933b9d6f-73bd-4a16-b330-1e1a2dfa9d3f to check out using the GitHub CLI. b4646a28-27dc-49c8-8c41-2cc0e0b20bc2 What is this 2806 GHP R checkout do that. 2eba1739-b43b-4b4a-b94a-c04e3aa12c4e Great, I should have upgraded this. b1822947-7e7d-49e6-bed5-23b124d823dc Here we go. 3b2c3139-e5b0-4b13-967b-18e2b04fb6af OK so I'm gonna look for all b43e9e70-18bc-43f2-85b3-be282b5503ca occurrences of copy on and checked. 5efb6c3e-bc2f-4876-8133-3983d40840fe I love global search. eed01ac9-d02c-4fb0-b2d9-92ea521efa8b OK, so here's the implementation 7a9ba025-af23-4b0c-b56f-b5b2e7b8d749 we're looking at. 411d17b9-4ecf-4e53-a340-c1b316bc6e05 We have internal usages here. 8e26cee5-1fad-497d-ba46-9a5cc01522e5 What is new size? a7f899ff-3ad3-4fa9-b008-6d3870a997de I care about the type of new size. df3b168b-bf6b-4e3c-8bea-bb69f2fb4c65 New size is the size type. 9a057757-1e85-4aca-ba14-e9b9d485a18d So this is an arbitrary size type. 4121aa39-6a61-4219-be83-a031d0c9a220 Coming from a sign counted range, 4ced35ba-b62b-4359-822d-8fc75afc3a59 let's just continue spelunking and see if c3b1e6de-63cb-454d-a66a-0b30d05dd522 we can find where this is coming from. ce4bf20b-720f-4362-b7b6-6f06fe372797 Uhm, count. 33819378-dde2-477f-bfee-aa55fcd301c4 That's a size type from the allocator. 7b46cc74-2bfb-41b2-b356-bddc84644126 That's a vector allocator, but again, 2fef9263-dc97-4d97-b165-e8a712e20e90 this is all this is assigning to a vector. c3627791-70f4-4925-9ad0-ae2b89251a96 We're not just copying arbitrary iterators, 6bfc08a9-e2f9-493d-af87-23e4a5813805 so a vector really does need 49e8b390-df47-4894-ae44-4db310be69ef to store its stuff in memory. ab1c46dd-0b25-487f-9ff1-2dc68293c576 OK, so maybe assign counter range. 1e31c4c2-4e33-49f3-b014-ba4b13c472b9 This one's fine. 75e1d1e3-33dd-41b9-a8d1-f41cf33b3eec This doesn't have the same concern. 60af36cf-a2d4-47f0-864a-170b32e6dd84 It is highly suspicious though. 8b3820f8-321f-49fb-8cee-fcd24dd4b6d3 Let me go back to count copy and checked. 960104f1-456a-4151-a098-7ea76412ca80 The other one is in insert range. a3fd1af4-86dc-4358-9739-9b148869c519 OK, so with the specific usage here. eafa0d4e-60e4-4d92-ad61-87321e1f12f9 It seems like we're OK because c4760642-ed6e-497e-99bc-a0e6152822dd we're actually copying into memory, 7f3783c3-2cd6-451c-9ec7-f26211145a23 but this does have the flavor of a. 52803146-709c-4820-be47-f7735bcd5b1d An algorithm that looks af3aa9ed-f002-4c92-a663-8eb109b28f10 like it's general purpose, 2557fc64-86f9-4511-8a54-aa0d298d6384 but it has special case assumptions 6e4c997c-f424-45ad-85f4-50ffd6c35887 and I view that as hazardous. 7210c99a-ebd7-40ca-ac82-f13b4908c66e I would be much more comfortable if this, da23a346-27a8-421f-bc0a-e7c0f4410bf1 uh, some sort of you know, size, type. 035835a4-83d6-48e1-a896-22df18755d6b If this is ever used, it doesn't even know 09825e01-7937-4c22-9092-04989c56d4c2 it has colors outside the copy family. c0d0851c-09c7-498e-b063-97bfdcd52997 They happen to be within the vector family. f553bcdf-2f06-4623-9e55-4fc9da0c82b9 But yeah, I think I think I want to c7f25997-43bc-4e52-9af1-35bf69a94688 ask that there needs to be some sort 02d9d788-541b-4cce-942c-56c898c74d0a of difference type and then it's 5c5a20a3-02c6-4d87-a2f3-89eb04c23cf3 when we call copy memory when that. b25134a0-5c09-435a-a83b-b53bf8748027 At that point, a2e9cab3-f137-4447-a8ee-a917b5498dee we know that copy memmove and gets to 5846432b-083b-411a-ab3c-682d605a69aa use size T because once we get this 4a92307e-c66d-4d30-80f6-6f79106ac2e5 handwritten type trait selling OK, 2e54d4fc-d4ca-4134-9830-1425597af377 telling us hey, 078bdf6a-e740-4b84-b439-d66dff783309 these iterators are really raw pointers, e413c3de-58d5-4dee-8faf-9fd15a92269f and the thing we point to is trivial. 7e2c88ce-327d-40a3-a8f6-f7ce52b58816 Everything's in memory. 8b4d2c8a-d84c-4500-b310-3360d4064f78 Have fun once we know it's in memory size, 1f8e4643-44da-475c-98df-42d9930b2ba4 it's totally appropriate. 07bdb819-d344-456d-856c-7dd5203f2f39 It's when we don't know stuff is in memory, c574916f-545b-489b-8b2d-7033b743a8b4 we really should be working with 5b80ebab-fe30-4cf7-a6b0-19224e528d5a the original arbitrary type. 1e07eef3-e953-495d-954c-44d23d4b0c1d That or this should be prominently 3e15adba-a3e9-43dd-b64b-082fdfbdd6ed commented saying hey, fb4decde-7784-4db6-896b-9141b692b9a8 this is really size T what are e9a0e307-a8df-4bea-9135-5f77ca59a288 you doing at a minimum, 8473daea-eb52-447f-9bfb-ee29ebb632c0 also compiler warnings, 76922e37-f84b-4f54-8efa-752026a9ef76 because we've dutifully converted 604c7901-2ea7-4175-862d-23e61102e3d4 within vector all of our stuff bc4fd293-b977-4ca5-aa6f-84722009224d to size under score type. 491017b0-2052-47ae-9413-ade664498280 But then here we just call it 167b78e7-41c1-405d-94be-f324546d7b21 implicitly and pass it to a size T. fe435e79-2b1a-428e-b631-9623bc8daad9 So size T is tiny and size 85b8c7a0-86fa-4bf4-a041-e3a7977e6ffd under score type is big like. 4922009e-cd07-42e6-a54a-a52216473874 Vector with an allocator or ff05b70f-358c-4f61-8397-b9c10c7416ac the 64 bit size type on X86. a7ead955-6982-4d9f-8218-41c25f0286c8 Admittedly unusual. db2600d0-cf8b-4013-b832-e9ef8e3d8c46 We get a compiler warning, 017f651e-41f6-4f52-9d6c-3c08d3408747 so I think from a compiler warning standpoint b41fbd63-4f61-42d9-9c1a-3fedf2489f54 and a minimum, this needs to be changed. 2d6a9596-1c7c-4782-9c9b-789601169249 OK, so this is hard coded to take size T, 4b820822-7b7a-4f52-b600-082984bbe46a But it's being called with. 80d46dfa-3455-467a-9fb0-c39e967e76c6 Or called by vector with a 692bc658-6cbf-4b74-bd15-a85d094c3f9e potentially custom. fe15245e-4dc3-4156-ae98-4038a8239eb0 Size type to avoid compiler warnings. 811e7dab-dd17-4d9a-ac1a-e9478d3a1343 At a minimum. 61323f4c-9de2-44bf-9363-a4b8a0f2974a It seems that this should also. f995264f-47eb-4eb7-b06a-a7d71790d597 Be generalized. a80fd7ea-eb9f-4f98-8b2d-82602429f7ab Not sure if size type the. 4fff80f5-056a-4e4b-8e91-b998f3ba7f7b In its. 6921d9c8-2b2f-406d-8d83-0243481dcf3a Difference type. f84d5ffd-c97b-4bea-acd6-d71dfcafaf80 Etcetera is the most appropriate here. d552a8ec-b287-4b07-9aee-9b2d9da4a3a9 Here I can just leave this to Casey 972011d9-0017-4482-984c-e27a9c09c1a7 because as it ranges expert he will ccb6d055-99c1-44f0-ab78-d350e43f2e6f know exactly which type he is and I 96f3aef8-a364-4cf6-8a6f-d87d76b864b2 don't have to think too hard about it. cb65e875-6bd8-4bfb-a07b-ba7d48d2995c For example, I know that C + + 17 b8e56114-0b9d-4bf3-b63f-8c23bc4db7d9 input writers don't necessarily bb68b75d-fcb8-4b18-aa4d-13defa21f31b have a different type. There you go, bbb8ec1f-0ed8-40ac-9270-fe9e4426d120 so different type would be a bad choice. 36a30b69-ee11-4ac0-9443-6ea0231159fd Yeah, arbitrary integer type is 4e4fcbb2-4c42-4642-8f22-d977f9e404a4 probably what we want to allow here, 9563968a-d495-4799-ad85-3da077f77827 and that would be just fine. 49c49aea-1548-4b5f-93c3-f3b562cc2245 To an arbitrary integer. Type. Yeah. 0678a2e6-f8fc-4f86-9eff-0f2ef2ed7418 OK, this is hard coded takes ce62e92b-0364-4ccb-99d9-98c9fcbda778 ice T but it's being called by f4148b04-4619-4208-981b-f81cf4c51a88 vector with potential custom size 0d2b5184-bec5-4ff7-a22d-38fef1e3ec2f type to avoid prior warnings. 2cf34665-3974-4b78-a4de-72cb58975e21 At a minimum it seems that this 97a5275c-0248-405a-9b15-1518d3c67262 should also be generalized to 13ec8bda-6e6e-47b7-9b4d-8d68a333ef90 an arbitrary integer type. 16893fb7-3802-499e-a9e5-c8aa0cab7df3 I will add the note once we 24f71ad8-537b-4434-8e6f-cf6c2f8a4816 determine that the MEM meow memmove 5b2f0284-896b-435d-843b-30e5c05ab71c optimization is applicable, a0bb6876-47ae-4caf-b6ba-976d6d11cbe9 it's safe to static cast to size T. 6d9b63bb-830f-4785-a986-0ad01d0212f8 OK. 2d04b675-1b87-49e8-b408-11c575595ccb OK, so questioning every single identifier 3509b8b2-7953-444d-9063-e0dce41b4b5b we've got size 2 there. OK comment copy. 2825d1f4-2258-4040-b8e9-080214c50466 Interesting how this is price copy under 3f730834-d2eb-40a4-b940-dd48e3ffeda4 score first plus inclusive 0 count 4c0bd38a-8a85-440e-9b7b-c81f2c3fc45a exclusive to dust plus inclusive 0 count 6be222af-0231-4f8a-9d16-f5b2ee92a8e0 exclusive returning dust plus count no b01bd002-1fd5-49c9-9324-659df30b1d5f test callers outside the copy family. 947199ba-5596-4f0a-baa6-4ac5334c3dce OK, if constexpr it or copycat 32364f7f-8689-4e00-a14f-9024385ab0d0 here is just utter because all we 56337539-8302-462c-a9ed-60bc994aade4 have is in and out at bit. e09f6053-3ac9-496c-a4cf-2527cd49ecfc Copy assignable. fa949779-dbbb-4ee8-b775-fe2975a792ea Let me just check the argument order here. 65a73e93-18f7-410a-92d5-5d3316725b62 I think that's right because it's 22074391-66e1-4bed-bd7b-f696a7bb8e6f copy pasted, but can't be too sure. ac3e9901-bfee-405c-8748-e905f10131ef Yeah, we give it source and destination, cf4ab479-10d6-4f31-be68-e5ff31c93f9a so that's good source is in it. c2ff8a7f-aa1c-46b3-ae35-eb1decc41285 Destinations out it if it's a bit f1b67208-47b6-46e6-b396-60ec1f40ca83 copy assignable then context for 20. 5c3db44f-f84f-4c87-8b1c-8e2645c8a1af If we're in has 620 mode. 8518fe1c-5f4e-4ddf-8ced-a9a755450604 If we're not constant valuated, ab3287f8-b785-4f54-a8f8-80ae74dd1bfa we can do cool thing. b1fe9f61-799f-47de-aba0-793efdb1c664 Umm yeah, this is the right. 3a538ade-a91f-4c1b-ab01-8021d62b35a4 This is the right way to test it. 205608cb-a26e-40c9-b46e-c996d834b9fd We've got this sort of dance that we 21ab7bae-539f-4f28-9a3d-79af9cc036a2 do that if we're eligible at all at 5f0387ad-86a3-4d45-8e8f-c73397ab5d82 compile time for the optimization bc00177c-4363-40fc-bc98-f3863d469845 then we will see if we need to 0b3544f0-73ad-4092-8ecb-98b647f24fda defend against constant evaluation. b3193cd4-f9a8-4e0e-93df-69be706627ea So in 20 mode this function 9704d747-b2cd-4427-b11c-fb6ac47ba0f9 needs to be constexpr, 20019be3-0d58-4a39-b2cf-3e9f1b18c7fa so we will be able to call d48d87e5-e99e-47db-b335-0631514f269a also constant evaluated and if ccf0739c-51e8-4ce0-83f2-37b89a8c4703 we're not constant evaluated, 17c4801a-676b-4192-a785-17ab466984a8 meaning we're runtime, we can call memmove. 6c4ecac1-851a-4436-94bf-5f6d3e009107 If we are constantly evaluated, fd01c9db-58cd-4c99-ad4b-5908104efd06 we'll skip over that and do the hand. ef75bcde-67f4-486b-8ea0-e4364863b4c9 The classic loop. 12d16883-b2b3-4c72-8eba-2e7e3b6a1422 And if we're not in 20 mode at all, bbc29904-7ecd-4429-9a02-cc353eafc2eb if we're 17 or below that, af9b5069-20bf-4a67-8d3c-2ce5f43dd6a5 we don't need to worry about being constexpr. 2ee1a1ef-1aa8-47c6-b24c-b5a63fbc3e5a We can just on conditioning call this thing. 0bfded5d-cd1f-433c-b702-61ea9ffb3737 So this is the right order. 217d2d61-322c-45de-b0df-d375b4608ea3 The right structure. 8403225d-5b4f-4265-a80e-6b2dc3c4620a We have this pattern elsewhere. 8e65cc2c-9d0f-42a8-bb33-54cc937e5fe7 Otherwise, do the classic loop. 020eca18-b524-496a-b311-9c08f40fbe47 We've got a void cast here to defend fcf1e71a-9ad1-4f61-9468-6b7abdd9881e against overloaded commas on both sides. c95aec5b-f9ab-4f8d-ac55-cf457f0e5bd1 Yeah, that's all just copy paste d21b1471-cb47-4047-b7d1-5762c48505cc from the original stuff, 7c211118-62eb-474c-a380-7ac592cffd96 so that's all good. OK. 97163512-8131-40d9-8188-33771098dc6e Next up, so we've got a Sentinel copycat. e1c8c78c-fbb3-4b09-90c4-646037eb6b2b This is BA. 72d4f55c-cd3d-4b53-a95e-7b5d8ff761b6 This is the generalized form that is 0c74ac32-58de-430f-95c1-bb2acc3657c3 implemented in terms of inter copycat e2a775d2-9b2d-4dec-b5fc-5ec22b22105b but with extra spicy stuff here. dd99bbdf-3a3f-451d-a748-a18937212961 Template on class INIT class 2d07346b-cd7e-4785-ad1a-d48ab585456e Sentinel class outit using Sentinel 48ab327d-589e-43b9-bad6-0ef56d5d5bf6 copy category is conditional T, 51dc5c14-cf9b-424d-a9d1-bc71aea9063b so we're going to ask a question b163bc9a-0709-4bd6-b253-4b99607c7e92 if we're in CPU Lib Concepts mode, 69622152-9a3d-4261-b241-45a486f045b6 because this is unconditionally defined, c0a3c8db-ac4a-4425-be51-258871769486 but if we're in concepts mode, 7e664338-a80e-47b8-9bda-920eb9bc5d8d we're gonna ask. ad4825b6-d956-48c9-aed1-44220f1e2063 Is the Sentinel the same as the ee879ff3-e91c-4a5b-bfff-f799da9824a3 input iterator then? That's good. bb39e57e-63e2-4a5d-a678-b1121bebc225 We're we're potentially eligible. 121e5207-69bf-4a43-9687-7915bd5a61a6 Or even if the Sentinel is not e56aa5b4-0c1c-4157-99cf-5c790011d6eb the same as the input iterator. df1006d6-4b61-4e20-bd87-750d909a8373 If it's a sized Sentinel 4, 8c96a91d-af0f-4779-9ab3-6981c90c0d45 then we can determine the size and 5bade3d5-597c-4c39-bd82-f980b0767636 constant time and engage the optimization. 558623ac-49c8-47aa-aded-78d14fe1aded So that's what happens when 6ed18336-49c0-458e-8fec-f341f05303bb you have concept support. de7b1540-d0b4-490e-9755-da12ac883bb9 But if we don't have concept support, 2adabebe-f2d0-43c6-b2c4-d1bc921f39fd we can't detect high Sentinel, f120fded-0f6a-47f7-b255-55bd651f440e so we can we have to restrict e6dd9a9d-af59-4c67-ad5c-ce58417c3705 ourselves to just the Sentinel being 5c083d4f-d05d-40f3-95dd-99b410447142 the same as the input iterator. c37aefba-8f0e-4ee8-8f42-dd42af176497 Then we call it our copycat. 324898af-823a-46e9-9522-9dc6dca49ed4 Otherwise it is. False, trivial cap. 8fe18198-acd7-402a-8ff4-434d5b4aa448 What is this? bd1f82ce-6848-4f77-9454-daa64e98c8ca OK, it says false for both big 75312741-e1f7-4c31-bff6-695e8b5d7b9f copy constructable and big copy. 6f709b69-8458-4a36-b3ea-4524c77c4006 Assignable it's like double falls. ddc332f3-2324-4721-a8b4-39d54dd5332d UM OK, so that seems good. a2b769b9-e2ee-463e-bac7-6606eb3a9c60 My one question is do we have to 8dee98fa-3e18-4832-ac97-a95f2e5cc47a worry because this is is same V is 9da85e6d-8794-4d7f-893a-3657126e21be same V as a standard type trait. 34d3485e-a589-4557-a812-43d6942cf6fe It is extremely specific, it only wants 7cc2148e-3009-46c5-8331-b0a8fed4dd7b the types to be exactly identical. 9a968a0f-4fa0-473c-9ee2-de35b61b4ea7 It does not want any divergent CV qualifiers a01473db-4f0e-4b7a-9b12-5041e43a8c1f or top level references or anything. 98179bf7-35d4-4260-a386-d6ff4c665bd3 So if users of Inter copycat could 299808ad-828a-40c7-91fc-8051df8f96f3 potentially be passing like. 62812576-7277-40b2-8da3-72b1d53d899c Constant the top of a constant iterators. b8f0504a-b1a8-45a0-9b6e-031b350fae4c UM, if ITER copycat tolerated, e3ddcdfe-1018-4a6a-bb7f-b867ee712f58 that but Sentinel copycat doesn't, 16fd1704-2244-4f71-b535-acef58a0d85a then that would be an issue. aec9ba96-52b1-4591-a8dd-3376fa188085 So let me look at. 193e24a4-139c-4b30-8ce6-d81255e4b7f1 Uses of it are copycat. c296f546-17e0-432b-9f1c-d5d3aace1cbc I'm still with the branch checked out. 030181ad-51fd-4942-bc6d-4e9579f58817 So, whoops. 57bbd285-721c-4105-804f-bb1919f20c18 Here you first OK, we do usually eb6dd86a-4bc7-45c1-9361-09e2ab23aff4 call it with something modifiable, 8d715f22-7d0d-4158-adba-0fb0093af9d5 but there is the potential for it e3844698-e1e3-4e16-82b8-648aebfbcc61 to be consequ qualified if we ever 020ed216-830c-41f9-bde8-7b9bc36dcece had a couple of accounts there. 1ed0ba8a-bfc4-484c-bc81-be89210cff59 I'm just looking at usages first and 19733e28-1ef0-4d03-8f01-ccccb7a30c40 I'll look at the actual definition. fcf9756b-4785-4406-a753-7cce6f49a53a Definition of bitter copycat. d82bfbb2-b3e6-4de4-92f5-a62bdea34b99 Ask things like iterators or 8522f1f5-81a2-4315-b379-8831d7d1cd33 contiguous iterator nonvolatile. b871c703-8668-4e9f-bb9e-4542e33b5715 It gets the value type. f3307915-ed84-4455-a27f-0e2682a70cc9 I think here. Do we remove? 37633f8c-b2ce-4fec-98ba-1a10aafb20a9 Do we remove top all consonants? d23e35e9-03ab-4a4d-a3c2-7281b90c7927 This is something we always have 004d2c76-24d2-42e3-9c4e-61805004b5dd to worry about in our handwritten a158134c-cf56-45d1-a950-683fa1619920 type traits like do we care 21cc04c5-8c75-4f4b-9bbf-a0bd2aef1860 about tobacconists or not? 8f87c16c-5b07-43a0-81f8-425c86056def Or is the definition of this? Here we go. 8c40fc58-4b5a-4f5e-a65f-c53f43833230 We use inter value T and Constance mode. 9faf2c14-601e-4d61-a844-498edb863bc0 Otherwise we ask iterator traits. 0586f939-a48a-4b16-ab08-43027a6a691b Iterator traits does have a specialization 034d708a-e76c-432e-b317-a32763df92c2 that ignores top level cost as I recall. 2ffb5608-f8e8-4757-986f-c32000faae76 Have this code review is just you know me e08c5343-0a2c-4928-a3cc-a9cbe357e86f trying to remember how the standard works. b82c9449-b91c-4916-97f4-d54429bb92de Her specializations it's for Tye star. 06a406c5-f130-46a6-8faa-254dd4b2844d Where's the one with whom we have 797cd278-973e-425f-8041-c911b74d6311 the table of contents intercore. 33d00d08-d09e-4f2d-8ff5-688b87590754 This is actually where we're 6029b940-c928-4fbf-b99c-aebc4e98c9dc implementing iterator traits are we a705084e-b494-4360-900a-8863a71307a3 not ignoring tuple of accounts here? 1f82da1d-16a8-486b-a944-71a60d7cd197 Don't believe so. OK, so OK. e51ecdc0-6f8c-4940-874e-6c5328eb616c So this really does it wants 900548d0-6e03-4c9a-af2b-775ca0b17477 non constant qualified. OK. 97669394-f103-4a00-a1ad-0752ab60a824 OK, so that indicates that UM, 195f79e4-dfa4-4040-b167-71a73a48e59e inter copycat does not really want 9b382357-23a1-4c00-9009-3c291685b58d to see top of a constant iterators. 45bebe1c-9772-4ec6-9727-c8ad2138e7b9 It already would have a problem there, 8a96d4da-ed36-4dd6-a9f6-c5e6ce05b9fc so we don't need to worry ce9c06dd-917a-40b2-9acb-e09797a32da5 about the Sentinel copycat. 1a4b7417-a61b-4f2e-b61f-93ce7abd7f22 OK, so that's good. 12d09719-17ea-4e28-8b9d-30de59e1a4c0 Otherwise we're back to copy and check, 818178f3-cd8c-4fbb-a5a3-641595344228 but this is being generalized. 007aecf2-0992-40a0-a70f-6fd9ac616e1b It used to insist on in. d834388a-f83a-41d6-9e60-cb8806b0e916 At last it's now taking a Sentinel. 599ec074-e604-4126-92a6-47354f1a878c The order of the template parameters 06308f25-26c6-4f9c-a8df-00f1f9d31735 matches the function parameters, bf133f46-4e9f-4fe5-aebc-9cf03c07d217 which is good. 28ea83bc-6406-4265-8c0b-a5a37d99bd87 OK here uh, let's make sure that 48a4ce74-188a-4e98-a6f2-1e1c0f446e99 the comments are still valid. 79e26bdf-4faf-426a-b203-032fbc3e419b Copy first to last exclusive to desk dot OK, 7c225af9-81cd-4715-a976-ba360127c6cb use the Sentinel copycat. ff792eb0-e054-4252-9fed-e131d36a9031 Past the Sentinel OK? 6656db67-dc99-449f-ad6e-85feaac8d3b4 Same that cost evaluate guard. 069e8956-0add-44df-9891-d9e1c682afbe And then if we're in concepts mode. 848dde1e-fa09-42d5-89e3-9f10224ac475 We need to additionally require. 2e58797b-c14e-41d2-84f1-ce1c3999b5e9 That in it be the same as the Sentinel, b9cd7665-4fc8-4fe4-a7f2-8246bd004f81 because it could just be 7083df93-5d16-4a33-829e-270eecafb688 that it's a size Sentinel. 715c91e9-47b0-4140-81e6-6f9acce4f023 But if we're in no concepts mode, f8e7554b-8263-4b27-a31b-1c19c7279881 then the only way we could have gotten 22cdad7f-05ba-4753-af82-94bc3e647a42 here is for them to be the same. 2edad1c7-b01d-47d8-9320-0dea85d4a1b1 We may as well as still a7a8d6ec-511e-4231-9664-615adf77b438 internal static assert that. 8525a789-ad93-462f-b87d-968b1f6a8fef Otherwise, I see if your signal 1d03f878-4fcf-4b3f-b5e5-5f6f7818c8ca you dispatch to the other one. d538dbdb-19d1-44c6-b711-4dc38ea697c3 OK. This is really trying to bc3e5c42-b40d-407a-9b2c-429a1865806f avoid repeating copy memo, 5a5191e6-38bf-414b-aa5f-232e1a5052b4 but it jumps in and out of f7f418e1-1cc8-4e8a-84b1-45c53cda4f47 concepts checks here and here. 1c7577e3-0067-41c4-80a9-e2beea1446dd It's all confusing, but it's OK. af1f01c0-8c7c-481d-b906-6a62394faa15 Otherwise people have concepts. 510a5d11-76eb-413f-88bc-c9faa1f1c772 The only way to get here 8ee10a11-a0d9-413d-8904-6034c55558d6 should really be Sentinel 4. 8515defe-0049-47e5-99d7-b90841e17f41 Then we can do the copy and move in. a5fdf2af-555b-4ff7-8e86-7493024d5b58 OK with first. ee31e579-7feb-43e9-86e7-7bbe0c33ac72 Last minus first here static cast size 070ed8ba-c81d-4ca6-80d7-00bfdbd6285a is fine because we know we're eligible. b52c6be2-d2ba-4062-9c7c-04fd82ebfc6c And then dust. OK. That's fine. 50cab32c-e508-4794-9450-37a3f3ddbaba Is there any better way to do this? 699a1586-070f-42b1-88e9-f429e3948f72 I don't see one. 5658ed10-bebc-45b8-a4a0-4976b2e3079c Do we need this first? 007fd029-2791-486c-b0d7-89f06d3e7ba5 Static assert here. 24e88f13-e978-4932-bf4d-d3e4b4bfec08 This one here we're static 3a2404a7-2175-4538-bbfc-d36335d24a38 starting with the same type, but. 25a44456-f3b1-4406-89de-5183336094f7 Synt copycat I don't think we could get here. fa066e8f-f13a-4fba-838a-0d4184574072 We couldn't get through sent copycat if they 4be9fb33-8ec7-4f9a-afec-1139b392991d were different types in non concepts mode. ca830e84-94c5-4792-af42-7a690733defb Right, what about Sentinel 4? 489a129b-f767-466c-8d09-d9e9dfcea59b In non concepts mode right? 59b8c7be-2dea-47bb-bfb2-2037c6aaec63 This is non concepts. d3d76320-7186-4d61-b736-ea264f4bee66 You would concept is not defined. 65716e2c-6d79-48cd-952b-1d8eff2696cb Yeah. Have similar concepts. 37aefdfa-d736-4e95-98df-97e986c62121 Not to find additional if there are different d8c51f0e-e5ac-411f-b7a1-cfb07d705210 types that conditional is going to pick, 21c5abbc-9d7a-47aa-966e-ec73657e05f5 the false type is going a27a95e6-20e9-49b6-8eca-a0acefb2a04b to pick false trivial cat, d987b5b3-8b75-45fd-9e80-a6adaec220ca in which case bit copy 42cb9fc2-dbf2-4e01-834f-20b8d462e566 assignable will be false. 103255f9-8cb0-4f27-84f4-2034897bdc38 So this static assert cannot fail. 7494d19c-bcb5-4ebe-9faa-50739fbff267 It's completely redundant. 6cf38e4b-8260-438b-9a04-4b9d9e1bf396 Yeah, well, I mean that that's what that's 7a404341-9db6-4079-819b-ea8d6478fc73 what the internal static series for, ed4917fa-b0ac-4da3-b257-74878a28bc05 because this one is also redundant in theory, b39b8a82-2926-4cc8-81fa-2f57325c41d1 right? 39a9411e-3629-4c4f-bdaa-3d5b9739f317 Fair enough, yeah, so now. ccf11cbf-979a-43c0-80ef-958478000477 The thing is, 2cfa6ab1-8793-44ff-b479-27939bb59bc4 it does complicate the flow here 6c248b67-0213-4aca-ae8d-bd9ee7aecc3f because you need the whole else. a1239bb4-b409-4e22-8865-56626e90c941 I'm not sure if I'm I'm not d9d49f04-4d93-49e4-9aba-2040ae9321bf sure if it's worth it like. b6975c43-e35e-4aab-ab94-5987d1179d29 This probably made sense ba38dccc-9bdb-4bc0-b9b1-77ebd9547c0c while I was developing, 322c0b54-d3b7-440a-9645-a3a361a8504f but I don't really want to check that in. 80a64787-cd00-4245-be68-ae5215cae4f2 Yeah, babe7a9c-1a4e-4c8d-8ca8-bf212142c46e yeah, 4cde8aef-2ec4-4ff6-9dc1-8d2e24bec973 mostly because I mean we we do 5ab93b55-e54e-42a7-b0ae-7cc347fd8f73 semester internal static certs. 566e914b-3ff1-4488-b665-cfb8ae89be23 That's good when verifying connections 8fb30d0d-5fba-465f-8935-d3039a880f1a between like farflung code. 665094b5-3e92-4c9e-b1c8-bffe8c9e0695 In this case you're just sort 894fc5f8-8a37-4826-b758-20d9b765a9bd of verifying the trait that 71ea52fa-e67b-4217-ba37-14249dfadee9 you defined immediately above. 3f289c5f-ea42-4b5e-88a8-deb1a4ce694a I don't. I think that actually 14e16794-69c7-4bb4-bf1d-4aace766143f harms clarity, and I think this one ccf1792b-c6fb-43f7-b9b2-c7f05c51ae0b probably is not necessary either. d9d35862-e9dc-4eb6-9d4a-c9e506cda8d9 And then this would be easier to read. 1901a76e-b666-4fc2-b1fc-23bac0a7f3ea Yeah, because we wouldn't need to 285dd49e-51c0-44d7-aa35-cd2b8e881c8b think there's no concepts case. cb3d0ec7-a846-4aa2-ae53-94a8f118a60a Yeah, but I think this would be much more 83698111-15b3-448b-a3e5-ff94817b64ff readable without the internal source. f65a5dbd-6cdb-43c8-b6a3-8a3316c6591d OK, so sure you have one comment 36499557-d792-4ce0-b05f-a2bf6fcfe416 that extends both of them. 973e0ad2-6f3f-4c31-a0cb-0116343a8dab Sure I can. I can do that. 6bb0d3d4-ab97-43e2-8bd2-76c98c81154e The external static certs here. 9491872d-ec1d-47b2-940f-457312a78103 Don't seem to be especially valuable. 839df6d8-ba7f-4152-9d30-30b4fc6d9f91 UM, as? There related to the type trait. d97a36fc-9443-488c-a82b-c5c62612003c That's the internal type trait. 9e1f296f-af5c-4ef0-ab5a-ab78860314a4 That's defined immediately above. c720b5cf-fbbd-441e-b81b-9a39a02d0550 Eliminating them would. 3be288de-18ba-473e-98f4-eae04550a7f2 Improve the readability of 13601cfe-bfd0-488b-8a94-4fe716fed942 this code with no significant. 686a5f0e-1769-409a-8f00-f64e9bf04513 Law or no significant potential for danger. 1e855b75-9151-410f-89ae-2b179fa8b7c9 They asked internist. Experts here 9efe8285-da7c-46b9-81dc-2b8f4a94f31c don't seem to be especially valuable, a6c03be9-2c73-4fa8-bec1-271eb3c6b909 as they're related to the internal type 7d1ac5b9-8132-4090-87f3-ea1ef8da2c9d trait that's defined immediately above. a402c715-600d-4224-90bc-8e8f2376cece Limiting them would improve the 30900a99-9b0c-4c2a-a781-72fc7a060ab4 readability of this code with no f94a8f7c-cb65-42f1-89de-b32c5466b324 significant potential for danger. d452f954-5282-4c31-a435-b5a30209c871 So background here is that this 901908f2-83df-493b-9385-fe3d053ad6a3 highly ugly macro is defined only d6bf66e5-9fa6-4d47-bdf6-99c1f4258bc8 for our internal test suite. 9fba2f02-c7cf-4360-b391-ba9476c838e7 The idea here is that if we want to static 4d49280e-74cd-43e8-affa-6b657bbc9438 assert something for our purposes only, 01e7b7f4-f7bc-4d3c-8de1-4b9ac842d990 saying that if we got this wrong, 44c0d2be-7572-4285-91e8-7d83961580bc it's a logic error in the STL itself. 89bcdb53-303e-4147-afbb-de558067cd1f This should never happen, because STL. a0f2a3f5-3782-4fd8-bb05-e33c865651fd Umm, implementers are awesome and our f2719811-c7bd-44f6-a6fd-e3b6a0c71b61 code is highly reviewed and we never, 7b4127a8-ee45-4760-8826-47bf8766da1d ever make bugs. be9e2758-5152-4eaa-b9ba-2175797986d8 But in the rare event that it does, 6ebde89e-4ce3-4799-8c33-bf180e63f248 we would like to test that only 3f03338a-81e8-4539-a675-b5c6230f61fd in our internal test suite. 48789e16-e1e0-4f63-a392-f2f07353c167 It should. 913e2b9a-65a7-4f1f-bff1-9afe7aa22f68 Preprocess away to nothing for users f7a5db15-04d8-4d1d-8e7b-70fc7f77f106 because we don't want to spend extra 57ff6ce2-0df2-4613-9be0-1ab4fcb2d884 throughput time verifying all this f126257b-b6af-4acc-a235-0a5188f10baa stuff that should always be true, 9ec715c6-6521-4a9f-87ef-870c7fcb6b0d so that's what the still e56e1857-dce6-4dcf-a80c-895d033ebdf5 internal static assert does, d56e90aa-d4ab-48c7-883f-ea8fec310563 and there's a place in our machinery. 04f5c0c2-68dc-4a17-af17-466dfd151da1 This thing expands to Stack Cert only when 6cf9b9e6-eed4-4214-969e-a52f39e10db4 enable STL internal check is defined, 2d866803-2ccf-4fb3-b6c8-a10bc438d259 and this is defined only for our test suite. 615fdad7-ce31-4a68-9e96-70bce092c5f1 Somewhere we have that where do we do this? 54247f35-5b18-4176-abf5-c06016a82dbf It's probably not whole board slash D. e11c7202-55c9-477f-b69c-cdc1392c3d55 Here we go. c2e1635f-7270-4d71-b679-68b996d225a7 In our tests we have a compiler. 15304cc8-9bfe-437a-8f6a-92aea4fd481f Uh, set of compiler options, b5f84cf2-3133-4a7e-a65b-d3caddd1ca23 and we define enable STL internal check for c872d66a-5bb2-40aa-a2ef-4fd308f27f7f our test only everybody else not defined, f9bd2deb-26bd-4853-9446-30ac159a7083 so it expands to nothing. 8e599692-a101-41a3-900b-71392b30725c Uhm? 38bf774b-0a98-438c-b70f-c930cdbf2ded Because we're not asserting 2ffb23c3-7695-4719-8dc6-e096bae4f62b anything about the users code, 3446b92a-fe65-43a0-83ee-eec6eafb904d it's purely internal. 6c181489-5e64-42d2-90c9-4d56e1046290 So yeah, f7a6e39d-8841-4f10-bc8b-4cdc562ac0a2 I think we can drop that. fb67a78c-3b21-4a78-9492-fa50a0a9b157 OK, so if they are for e8ae9695-437d-42c8-80aa-a41a714d5ce8 concepts, if it's the same. ee29b3d3-d727-43dd-8144-aa9fff051fe9 OK and then. If they're the 47d3464f-be8c-4ef6-8862-5587b114c573 same I'm I'm trying to think 5759d1b2-6436-4db9-83e2-0dbfcac44b3f what happens if both are true. 0a57bbfe-d6f7-4f96-8470-02110da0713e If the types are the same and a4e871cf-6d2f-4138-9791-9f4241b4bd82 the and it's the size Sentinel, a5e87622-8fac-44b6-9deb-f370c78c0d84 well that's that's always going to be 30c122c2-765c-4cf8-8f4e-d53d4ca2a352 the case, because if you're eligible, e92a3cb7-0aee-40ad-990e-74308e1b3f2d you're like contiguous iterator, 1d6f101c-919c-4995-9c20-156cb5fe3da8 so it had better be a size Sentinel. 5c230f18-c5ee-4f0d-ad71-2eb9cc470c0e Refer the copy memmove 1. 17947144-7b9a-4e99-bbf5-c8f11f3bdc88 Because we gotta subtract anyways and. 555a3b90-25b1-4428-a4e1-41e62f5bbc8f This one is better when between d8f0db25-5b9f-4f16-bd8f-21df907d2818 the two forms, 7eba250c-60b0-49c6-954c-6422965d3b41 because this can subtract byte pointers, 5ff243e9-689a-4891-a03a-4a9092ca5a54 so it doesn't do that. f20329f7-af5c-4690-9a91-ea2892111c0c Vision we're entire division by 517aee16-903b-4a4f-a5bc-5859ea006088 constant and then multiplication, 174f3c44-10b3-48dc-953e-be95a09d63e9 whereas if we have Sentinel 4, 21cdbf8d-018f-4617-8271-c0162530d5c1 this one does have to potentially 6a8f9c21-9cdf-4473-8886-88adc69c743e do that pointer arithmetic, 7cfe99e2-06f9-4b6d-bf2d-d6b710ced8fd so it is proper to prefer this one. c7d6832e-f92e-4564-a790-d69f15e4920a So I like. 8b0aa3ad-aef5-442a-896a-6d6d1881eeba OK yeah, 5ea513f9-21b6-4a02-95ab-5d6a44623d70 whenever I see control flow I'm like OK. c93e6fbe-28c5-4d7b-b192-0437c4d86cd7 What happens if both the conditions are true? 8dc8bb3a-f5cf-4cb6-bc7d-d87b60627ddd OK, continuing onward, uh, f9b9bf89-65e9-40e7-976e-ec3a4141488b we've got get final iterator unwrapped. fae58e3a-86a9-4972-9d15-c6840916495c This was the thing that was cc4cddac-67e6-41e2-ab2b-8c7656e297cf promoted from utility. e62e2ef9-4bd3-4d83-961b-5f4a48e26fa1 We saw that it's exactly unchanged, a591cc92-56c4-4f4a-af61-a56178820eae so skip skip, skip down to copy. ac7256d4-e69b-44ea-8166-30d0d0b6df90 Unchecked, we are generalizing. 4875d3e2-0632-4d00-9d1d-4f8d08fa8c20 We used to check if. 495f78b9-005e-4f2a-a525-e044404810ce ITER copycat is big copy, 244c780b-87bd-4e50-82ce-337f9b1e3961 assignable and recite something before. 1e328284-2a0a-41b3-adb0-77e8480ed15b And now that's going into Sentinel copycat. 47298996-a57f-4418-ab6e-44535f5d6cf4 Is that ideal? 2e590ec2-a4a6-4900-ba09-a9a8bc638495 Yes, because the Sentinel copycat. 1326bce4-2b2d-4661-8aac-a2c65ee3226a Allow site Sentinel 4 to also activate it. f77570b3-be10-4ddf-a6a3-5d6825a39266 Previously we insisted on ecb860ef-68e6-4b63-854c-0be5fe4f5b57 them being the same. d07a5b8b-2f8c-4e8a-8ee6-2c43cdfedbc7 Uh, because if we are. Hold on. 5a28f902-dfd5-4d86-9941-385a997038ac Here we were specific. df8cf4a5-4fdc-4a46-a6a5-0994dbe4c030 We said it has to be a Sentinel four. 62dbc37b-fc0c-41ba-89da-70f460bc656f Ohh because we did copy memmove 393d1a6f-c06f-4bfd-98e7-073b4ed2e3e4 and we synthesize final now as long 453bbb3c-9fe9-4cab-ac3d-8d17e7bc67f7 as Sentinel Copycat returns true, 6d4bdec0-b4f7-4a1b-ad43-c31282413805 we can call either the copy my move or 791b7c42-fae6-4479-b5ba-8fe4aad6e601 the copy move in and we have both paths. 924d23dc-4a9d-495b-bd15-16a273654920 OK, so this seems right. 4604ee31-0730-4b99-b001-133ada74f576 We're not as worried that we're 295d6e4b-ca6b-4808-822a-1227e6f51923 like changing the optimization bfe4cb0b-ec33-47dd-90db-278e064b4b5c activated in cases where it's not, b314bcfd-57c3-4fa2-820c-1746c2e380c3 but we're not. 995581b4-eec5-4365-9ae7-335ae30aeb54 As long as Sentinel copycat holds. 565bcb98-3014-4e2e-a646-2adfe18ebed8 And this one says. 4f18a101-0dcf-408e-be64-6783f5e4be36 Either we can find the last 6e26960a-7dae-4a61-8d18-422c4b2394fd iterator or they're the same, 05081143-42e3-45ea-a5d9-e2f9eb41c1b4 then ask it or copycat OK? 4483e5ec-7514-423a-ad9d-452580015085 And we'll handle both cases below because 7acf3fd7-7ad4-4d9d-8c76-8cff89f26087 we do have to handle the unsized. d51eb07b-8f3a-429f-8dca-b4906f3c6adc Sentinel 4 yeah, that's the difference. 12c8c142-9bb0-4a22-a3c6-862b83f208e3 Previously we insisted c25c2048-843f-4e62-a285-a6618bf21129 on size Sentinel 4 now. a02b6fc4-ce93-4536-a4aa-f2fa23bd62f7 We'll handle the case where it's not bdbeabba-cb25-4c3e-9d16-e465ed63444b a size kennel, but they are the same 943e2c7b-02e0-4eaf-b066-0a84596458fc and they otherwise are eligible. 7e6bc1d5-4ab6-455b-8c0b-a16dc2420310 It actually seems like perhaps we 46af0aa8-8505-4889-94a0-5780f5b95fe9 we were overly insistent here. 5987e339-52fc-4a3c-a9d5-e98ad5dc8c2e Oh, that's right, we weren't, UM? f2724861-7d9a-45cc-86a4-a0ec544a67fd No, we we did need this. 80a6a502-d43c-4c46-8358-07dc0e304d7d The issue was what if copy and checked? d65766ce-e484-4038-ba8c-d4d7708f1b67 Have some Sentinel. 4e679f63-6587-4228-b7f7-4732a4f53a32 That's like unbounded or something or. 61b05603-0349-45ac-bd9f-e26f1841f7eb What if it's a Sentinel that only inspects 3dc519eb-b269-45ea-b946-5952067a3270 the element type so it's not sized UM? c092f1b0-a6b0-4498-b249-b4aa062c1635 We required it required it to be sized here, cc3f4b09-24d2-4349-86bf-a4e6117a73db otherwise we were just 8bc78295-8417-438f-bdff-34b545ff9064 ignoring the Sentinel entirely. a146113f-6490-465a-b2da-89f51d98d607 I remember this came up in a code review, 4035abeb-10f0-49a2-9ed9-327ebc0d807d possibly a video code review, d33d9591-74f8-4bb3-9571-576356197aa2 so that's why we had to check it here. a233cb72-59e0-4309-b539-40f56f69ab21 But what if now? 64c8f2e6-5a08-447e-b1f5-39a240e8a67d We are passing it to Sentinel copycat 4b339eb7-e8ac-46c0-ba66-d141675f377d so here we say either the iterator and 4211e589-94db-4e80-b8cb-1a20be2ac210 the Sentinel need to be the same type. b214b20f-3a5e-48f4-8109-e617fc40ec18 So we do care about the Sentinel type b729aecf-d584-44da-96d6-51c2ecc7e216 there or it has to be size Sentinel four. 27dd5717-b93d-408d-9d34-f00423fdaa1c OK so we aren't just ignoring 79b15e80-b329-4dbb-af29-a9a8eefbcca9 the Sentinel here. 56a9aec3-fca9-43fa-b17c-b3bbab62bbed We are properly activating either e87b9496-a22b-4d0b-9fac-5ff86b27cf09 in this case or in the case we're 4465f0e2-76eb-40ef-a7e9-8bdde3f8ac50 the same because being the same. e4844e74-463a-4dda-b805-a02dfcf9306f Is essentially stronger than. 49aed8ae-4831-4303-87dc-d390ee97de93 Site Sentinel four. 76b92c7c-fabc-4ce9-a4bc-5dfc9dfaa2bf When the bid copy SIGNABLE is true. 3311c5e7-3ea4-41d3-93a2-52c5ef20634f OK, so this is good. 11c1657c-09f4-4339-82b1-2f7800e02e5a We're not losing anything. 66f58556-b0d6-41f2-80f6-35b8e130b912 OK, so then this code is changing because b8844908-ad3b-491d-a73a-bd2770bebec9 we now need to handle the two cases. 90731a81-5854-419e-a2b3-7fc72741a0f8 What if you're the same versus? 42e5fd7f-bda8-4140-a11d-6cb79f92c15f What if your size Sentinel? 035612c2-62e8-41ec-bf05-c9a249b125bc For if if Constexpr is saying VI T&amp;C then. d45860b1-b5c4-410c-a168-b166435bbf58 We can just call, copy, move directly. c6919791-8ddf-485c-ac1d-d4c3f3d86fac We don't need to do this ranges next thing c850fe61-025e-4301-b34f-3d011aba4cf7 because we know they're the same type, 714bb883-5f7b-4665-82d0-0978d2dcb3ac so we can call copayment, move, move first. 16fac38a-679b-4de9-b1a4-1bc4015240f0 We can pass last directly. 3d41229a-b6ba-41ee-838d-e5dacfa6333d We don't want to move from because ff35814e-1cf8-4b30-853a-d0d1c22ff02d we're going to move from it down 04691774-ec2b-4b4f-a0a9-9c67bb7df600 there and then move result. 04bae875-a359-453b-aa40-839b87ef7afe Update result and then move it out here. e6f8173b-3371-466a-8fdb-a3311880436f That's good, otherwise they're not the same, 322e42a8-124f-45ce-8a81-fa0ae798ae46 but size Sentinel 4. fa88655a-107b-46bf-99a5-41b737d6e968 Here the stone turning static 20205511-1812-458e-b882-1acd71e800f7 assert is appropriate. 90edfaa8-25f9-4359-8b32-45a2dd7347bb We should stack assert that 96850ce9-56e8-4aa3-b270-cab9ccc8fffe is a size Sentinel 4. 06e09820-7c6d-45a3-9e63-6dd105969068 It's arguable how much 5a1e5a65-cb5a-43a2-b09c-516af8f6006d even this is necessary. eca3a69b-9561-47d1-9ea5-1559090462ff It is far flung like this is many, fe577822-2ef8-4bb2-950b-bf38b7ce8672 many lines down, so I don't object to it. f9ee1a60-0a8a-4749-9eca-5c1dc317c961 The thing is, we do actually 39bf5f07-7f95-4944-97cc-eb02aa0ee755 just subtract right here, f58b106e-0e54-45d0-b3e6-d62c28520b1d so if it wasn't a size Sentinel 4 b9efd291-a049-45ba-8838-8c8af61d2610 this would totally fail to compile. 1a856569-282c-4846-ac10-56877c411c03 But it's reasonable to have 851740ac-ff53-4f4a-a1f1-fb65e8913f75 that internal stack, Sir, 83701fc8-755d-4a0a-8e9c-5a62d5dad62c which is sort of a reminder to us that hey, d8881f90-d795-4148-8f3b-5a1efbdbeb60 we checked this, it was hidden 1cfbc9be-7609-49e9-a591-77833194728e within the sent copycat type trait. 5c757d1c-e1fb-46ed-b49d-d74540f38fca That's why we know this code is valid, 74105da9-ab8c-48d1-9644-fc0414e77b67 so I like that and it vanishes for users. f34fabaa-f822-4fef-9329-37be5de2c08a So we subtract last minus first. aaac0325-e423-4775-af9f-97573c0d4b71 We know we're. Bit copy signable b45f70e3-f13f-4bc9-8a74-d544f75e5ddb so it had better be a size T. 48ff8b39-d27f-4d53-a4da-b2cc5638a558 That's the count we can go copy my move in. bc33bdd4-2ab5-4954-a59e-a62d0cc231d2 1st. Why are we not moving first here? d005509e-73ff-49ce-b4d4-e4d1a993d271 Because we need to update it. 74d9110c-18c6-437a-bcd4-c78479b32cc5 Past the count that we just got. aeea64be-dce4-40ec-9522-4c8f0791bc3a Discount could be consed we don't 69e67344-e1e8-4afc-b3f0-5cd274e5d924 modify this and stood move result. c7759d1a-78d4-436e-bc67-724e61b72cf5 OK, so first we need update count should be e4b5c630-5bd0-4592-86fc-e43427c60017 constant remove result we update result. d5d73a6c-ef83-4076-9505-ec9bd8902a22 We step first by count because 45656d15-3cbc-4c21-aa15-2503218eecaf that's what we need to return. b15562a6-946b-47dd-8470-cd3de7c22d8b Then we move it out, move it out. 729e965e-d13d-4300-8f52-77adbaba967a OK, so this is just the constant. 83f1ae6b-7601-4847-b55d-cf430c4db260 Count. Could be confused. 5a4cdea7-3ec4-4baf-87ec-5c0be6aa1e7a OK, and then finally the end of ca3cec13-ffa4-4a08-9d1c-6a96682b5db9 X utility. We are in copy end. bec9a861-f7b6-422f-9dc2-bfb57be8be39 OK, we used to check. a8587cff-f3f2-42fa-8b0a-323cf450c816 This is a classic copy end. a3b58dfa-3eea-43d8-bc98-ba1c183058e1 Unwrap them. a618d97b-404b-4954-8211-994618810dfd After we. Move forward. a666a7f2-0330-4752-b4d4-d3d03262c134 The destiny Oh no. ace1accb-4f47-4f29-8541-01675631577a We've checked the destination that 08f945d7-4a07-4ef4-854e-8c59b07eeb23 we can write count bytes to it, fe5c8b78-8cba-4c8f-9beb-fdfec42d9805 or sorry, count elements to it. 4f9bd367-8c34-4e03-b618-672c49edcf93 That's you, dust. 1c0d049d-8e19-4a50-8761-f8c19a2f29ff And then if it would be eligible. 111a9acf-5827-4368-aa58-d36efd521285 And. 6220e423-9b05-4649-8418-c15827716176 Why is this not that Sentinel version? a55eea8d-06f8-46a9-8693-3c4074a14214 Send copycat itsy out. 3981b902-d777-4f49-a6ed-ed53cfd85149 Ohh because we only have. 21ddb1bf-f712-44f9-a440-56712a74a491 1st and wrong there is no. ab402ab4-54f6-4e0c-80c9-d660f43bc507 OK, so because there's no Sentinels, 0fff7a42-5f93-4dac-a27f-c91a066b48e9 yeah, there's no signal. 8e814ce0-b51d-4e8b-8dc8-ea05709e8b8e Right anywhere? Yeah yeah here, 360624c8-488b-44b7-8949-9b8e24b2f728 instead of saying you first plus count, 4d54499f-a793-4178-809e-25d5a2237ae4 as long as we have copy my move in, 0cadaadd-d9a1-4018-9955-d645c144f746 we may as well just static 7d6ddff6-88b8-484c-bb56-bc614295a423 cast count to size T. a340bf2e-5295-42cf-a7b8-bbe9764f13bb Which we know is. f1734af9-1b9f-4373-b106-d69a36a1190b Non rich we know is positive. e82c114c-89c3-43d5-bf72-88ce4b21c975 This is a reasonable, UM. ece72fe5-b74d-4988-90c5-ba14286feed6 It may end up being unnecessary if b97d98dd-2cd1-4603-a65f-a76da932c5a8 copy memmove N is then implemented ef9f0271-4c18-4383-82ab-6b73ab7e97a8 in terms of copy memmove. 3ea4e638-6c96-4f4a-a921-de81706c3d4b I wonder if I should note that. 47ef5b52-8b14-4e2f-9b93-88d80a99a206 What happens when it's implemented e00a3d11-5ab4-4e13-8bdb-ef3d2ae7eb09 in terms of copy memo, UM? 60f384d3-4227-47db-9e69-e0626684ce0b Or if it works? e9f91968-8ce6-4ce6-b104-6450404b660a We would essentially need to form. e064a7ac-60b0-4abb-9103-0cb693006207 At least the no, not the bite count. 450af556-2e17-435e-845a-250d8a8265df We would just pass first, plus blah. cea96624-b832-46f2-b7d7-4174f1c86ef9 Essentially, we'd be doing that 5ba59377-0f8c-4451-81f9-addbfc54270c with an extra function call. 7c3a2b7d-57d9-4498-bf6c-3b80106c2e41 I will note that it is probably not d7314fb4-2347-4c12-881a-4b91b935fd1d necessary to make that line change if b199ec5f-84b8-4010-b473-cb447b781761 copy Member Van turns out to be a wrapper. 40530f7f-28d8-43d9-8955-56b6bc344088 Yeah, agreed. Which. f8ae5a2d-f7f2-4925-9533-2999c3d8167e Well, we should suggest the author 2f1c1786-26dc-415e-a796-132a54406ed4 that they audit for other occurrences. 33fe0433-23c7-49c9-840b-bb4792e63ded OK, good idea. If Captain move in. d0f87f4c-1882-401a-b964-6cdd4a82410c Is changed to just wrap, copy, remove. 642e6a28-92cc-466c-a7dd-154902b2ad5b This change. Would no longer be viable. e24d27b6-b76d-4907-9dd6-52dbde243348 Please audit for other. Occurrences. OK. eab5ca9e-336c-47e6-acb1-ca5c6134e494 Cool hey 130 lines down, that's like point. 2f256c9c-2d83-48cd-a4d4-e66c4d2b82f7 5% of this entire PR? 49a93c47-5e8d-479e-8c1c-7cec98b5885a Uh, maybe more of the the product code? 38fa0bf0-2978-4ad9-88aa-9c50ed2db2b3 Uh, #accomplishments I. 1ae25a9c-86b4-4c8f-b7a6-6c58c5181b13 I guess we did manage to also 10ebf148-bbce-4fee-ae93-b9c068dbc963 review algorithm. OK, let's see. 9c71a98e-20c0-4820-8299-51f0ba0e6f87 We're our one hour in. 2e0a3831-4db0-40b2-b6b0-fe2774f365e0 Let's keep going. c6ba867a-07ec-40c5-a687-82411ce80122 OK, let's actually look a936ac9b-f6bd-4e27-9fc5-ece0c4f06da2 at maybe a container now. 2c75b9ee-528e-466b-b891-f9bbd9e57472 We've looked at some of the support 74156438-5f03-43e9-9ad2-c3bc2dd886ed machinery we could start with. fd27b9b0-6892-4e83-a3b0-5d57d4dfeada The vector vector is big d09760dc-0520-489c-9a9b-657de2b468c0 because of vector bool. 7f837780-7e40-40a5-9e1b-f6406ab40904 We could start with 5cf3f3da-8d76-4ee7-b325-308c1e6b3b89 something smaller like list. 9f310bab-783a-4432-b658-96e8caeb51b4 This might be a little simpler here. 50726fac-3160-4b9b-a06f-3c6c3334b944 Yeah, this is doing all that pen stuff. 3fa4e52b-30bd-48ad-94df-ff7ae7c82ad1 We've got a lot of have to 74b1bbd2-42ee-4ad1-8e42-1bbff22c1e65 provide a strong guarantee. aec15691-1eac-427c-9233-9f7b4132d272 Vectors complicated that way. eab8f3da-d9b7-4c41-bcfc-3dcdd678edc4 Let's take a look at this. 4d62a931-2031-479f-8384-7fb28ab9d65f This is going to be a little bit simpler. 2e67dd7f-0f92-46fb-ab3d-0575bcfd2e52 I can get through it 96 lines OK. 25a76e9c-5f66-4dfd-b57c-8ecc84a5b8b2 I have not actually looked at the b59224bb-57d4-4ace-82a4-d00982c6c97a paper yet in terms of exporting, e1150844-34dc-4227-80af-7452e8908214 so let's actually look at changes to list. e6748734-adac-422c-9a98-db66634b1dac Does this actually have a? 6f4a4df4-52f0-40f6-aa0a-18e4401803cc Oh, it does nice. 5879fcfe-1546-4548-8150-cc89520c831d So no, it's not so stiff. e76967a8-d4db-4b27-b125-10873137d78a Custom playlist. OK. 3f278542-aa0e-4695-8f73-eab3defb5f50 So we get a new constructor. e2b4e91d-c520-42b4-b9fa-41e201c3989b List from range T, 868b614e-052d-43ed-9069-665c1d8ea44e some range and an allocator assign range. 72e6cd45-d6e3-44e6-beac-dd61e70d6f99 Prepend range. Append range. 34b42ccf-bcdb-465e-8d48-1d544684dbee Insert range. And. ee307ecb-f93e-4a41-b3aa-fe4123b69b17 A deduction guide. OK. 8e308503-0c49-4e7b-a37e-b2ba79fcac66 So here we've got list internal c67700ac-ba88-47ec-a65b-76041311d786 machinery being changed. e9f2b5c3-85d7-44fb-bcf6-b7e970658614 Construct range unchecked. 8eeb1d07-f8b4-4761-b9cb-b1dba858fe45 It's getting a Sentinel. e2cb790b-0bb3-4efd-9233-af2dfd990ce5 And instead of taking two iters, 95cfccfa-aaab-4584-9146-43feff03cc6a it will now accept ITER and constant last. dab505ff-2785-4f51-9351-be4d8cc806d3 We don't move from last, e9e7bd20-735a-4974-8b78-4f6536e9e288 so it can be top of a contest. dc9c0f35-3e44-412b-84ff-163424c41a77 And we will now call pen range a3d3507d-4804-4aa2-bcfc-a8ad5f61a19f unchecked by moving in first, 3d4a86f4-6b69-46a2-bbb0-2cdeaf69ed75 because that is the last mention of first. 9161944b-2993-4091-a22f-ca814629c28a OK, so that's good. OK. 59599b83-97a3-4b7c-9a07-8a4d3a9cda7f So construct range unchecked 8bf10667-eea1-4fee-8552-184e9027a04f is being generalized. af6995b1-d15c-4886-a682-8c1a5fae0116 OK, Next up. c84e551f-828c-4597-9f78-919cfe33f9a4 So, uh, 40a1eb5e-d210-4aaf-80db-ea920b41bd62 let's see here Casey's guarding 3444b054-4e99-40e7-9410-35c5e319a2a1 this with the actual specific 416bac8f-0b02-45d7-81f0-0eef316336f3 feature test macro instead of just. 3b694f35-350c-41d8-abfb-621021ba5226 Which is which is a reasonable because 259d94af-1dbd-40c2-bde2-8a7682080367 otherwise we would need to say. fad32d6d-93d5-445f-822c-17fc5d305a73 Not just if CP Lib Concepts, 2503561b-fd9f-4fce-a752-8e827ed51a77 because that's a twenty thing we need to say. 94dc16ea-2da2-49c8-b89d-e2f055614638 If 23 in concepts and 5600563a-e9a1-4df0-87df-bba66d597d97 that's annoying elsewhere, c4697115-6d26-458d-a395-43191531f96b we've simply collapsed stuff for 20 mode, 0dc3578a-cc68-4fdc-a08b-6ba913a36e53 and we say if we're implementing 6936661e-5b66-487b-a71a-6e771ee3965f some feature in 20 mode, 73dc6583-1029-44de-b877-87444c19b8da that's specific concepts rather 73850b30-42c3-4145-9449-e13b980cea39 than saying if Dev specific feature 273cefbb-01ac-45df-b6a3-1df380fb4bb1 test macro just say if Dev concepts 9366a895-24ee-4e71-b20d-246f44e7bdff there's no reason to mention 2adc377a-ffe3-48b8-93dc-bbcf87b9856e individual feature test macros, 05080ef8-c489-4818-982d-d65ba7479423 but now they're moving forward to 23. a22a7497-7ffd-441e-8933-6a25a6029433 It's more reasonable to say if ab692bbe-9558-4c80-94b7-283857b2467c DEF specific feature test macro. 919d07df-e104-4a86-8826-d84dc595e3f3 This will be collapsed away once we gain. b2f4730c-bc81-46f2-b323-c3f9cd76b6c4 Concept support from udg. 44ef7bb4-0cdc-47ed-9694-776027d6d45f We have got a bunch of tracking 8520957f-d136-4be6-9057-6bd1b8aa919a issues and as part of that we will c1d98805-deab-4f3c-acdf-4c8b8ccbfe9f check all of these individual 37d3f70a-8584-48cb-b6ce-b3d1f75a1c6e feature test macros and it will d5420953-b853-4eb0-9221-b6137089b9fc become just if has CX 23 but for 3d35e2fc-7bca-485f-aba6-79112d38c5b1 now the feature test macro is fine. 7913f3a5-4af3-4117-882a-0234cb185b6e I do want to make sure that cf88da7a-da1f-4a81-a255-64ce81101103 the spelling is correct. dd13b997-f7bf-474b-bc49-853ea582db8e I'm not too worried that this thing e38bca38-52fb-4374-8bf8-50a0e8c7c0be would vanish but you can't be too sure. 50175701-47a9-4959-8d48-aad33f013af3 OK that is the right spelling. 2b14c561-af43-4000-b4d4-b53ddb2ae73c So if DEF CP Lib containers b5edae35-b2e0-4ef4-9761-d447eab7f3c4 ranges and if same spelling OK, fd923aed-6aed-48ba-9983-55081750a13a we are gaining the constructors 39c7955c-08ac-45bd-b610-868e60616137 here that are tagged. 0695ce5d-5c52-4345-a53a-04e2250691f3 It is two of them because we're not a6998658-3a17-4175-980b-2d984ebe7044 actually using default arguments and 6266121c-5304-415e-b02a-f7208cb7bb5e imitating what we currently have. 06607d7a-5d89-4a9e-857d-8687442e3923 So template on this internal container ef6bdf01-54ed-421a-8658-46ef1dd0ac95 compatible range thing for tea range. d9b6ff20-01ac-43a5-adf5-74dc5b999ac7 List constructor from range T tag. 4a3f23c9-7219-4df6-b80c-f75bbaf07375 So this is a. Parameter. 36972949-3bfb-49e7-9ae6-854678bd4cc6 Of the tag type being passed by value 18efd573-7542-4446-ae48-7d9ba537a1dc and we don't actually care about it, b1b47423-439f-4e13-9b2b-a04484389f0e so we don't name the function parameter 35176f61-9e54-4ab6-9d98-a6ec0737d411 at all, so that's what that means, 328f70a2-2ccc-43fb-94ba-00f50baa6e3b and then range rough graph under score range. 06f4dd73-42ec-4d5a-bdca-6dabdb244cd0 Yep, that's right. f3807a70-8547-4532-b2ab-d8c3312f2458 If we don't have an allocator, bf60988d-4342-4091-bc83-59039d65f417 then construct my pair for the 550f2742-330b-4226-aad0-0e481b731cd3 compressed pair optimization empty 08aea865-71b2-4872-8a8b-a49424e97058 base optimization with zero arguments. dc667b0b-3be2-4c77-91b0-51b92aa36096 And then call construct range unchecked dc2e87b6-e34f-4e60-938c-c89dd2e75225 to helper function with ranges 68f1b38a-0624-4386-9e29-d5c8b2334866 you begin range ranges UN range. d81667d4-dace-41c4-a2b1-5a471dc733df These are our internal helpers that will. 846c32e2-7d6e-4e9a-9b18-b990eb2cdc2b Get the unchecked begin and end. 16eec64e-ed82-4ca9-a285-da00b930a4ae That's good, and then one that takes d40b8360-6538-42d3-9bb3-567a4856723e an allocator counts alloc Raphael. aeb94a3f-60af-45e8-b4f3-43897f7667b4 Give that allocator to my pair and e459dc37-237e-4056-82ba-623a959530c2 then construct range unchecked. 67c0451c-1197-423e-a017-3f5801bd0b7e Yep, that's good. 3836a04f-04df-4aaa-8834-743564354e3a All of these new range things. bd6246ce-22ee-4c89-b731-3f497c4d8a9e The declarations appear immediately after the abaf8668-a255-4fba-859c-12bfecc5560e previous iterator pair equivalent things. c4209f9d-dffd-41e9-91a2-37f5b7e08d04 So generally speaking, 66bf4ec7-ebf7-47d2-bf5f-69b5525e1012 if you click the up arrow, 97f9dfd1-1e92-447e-835e-9cc83f3ba067 you can compare straight across. 8a47c1dd-5de4-4ef7-82d1-5c74ae5a0217 And OK for all the constructors and opinion. 9cdb39ec-231c-496a-9162-eae3238cc82a They just sign range not so much, 2babc965-60c2-4dc6-96d0-d465540ada08 but insert for example. 7477a0c0-3dad-4cbb-8637-24fea486e1bf That's very helpful advice, thank you, 23cd5fd4-9b24-4e71-80b9-4cc0a18e96dd yeah, so we can see that this is bd781dac-ab13-4185-a8bb-8059fb35642f being appropriately constructed here. 11359f30-9417-4999-9b87-29e833085852 We don't need to verify the range 300eae59-03dc-4e43-b7dd-aaf65583f429 because we were given a range, fba96b46-6439-4dbe-b85e-c0c4de2d9919 so we know we're not gonna accidentally 929b64db-f971-4d9c-8077-f0675eb814c7 confuse begin and end and mismatch them, c816a404-8b36-4ff3-bee4-1b04c615a0ab or do wacky things. 477e4a5e-1598-461d-9937-9b20fb4c638f And we are doing the unwrapping as just 77eb217f-0431-4e10-88d1-2ba7ced89c24 phrased as you begin rather than going 2db8466b-d502-4e0f-aa24-b8e0275f6a61 to wrapped because we start with the range. 0f7984db-258d-4d6b-b23e-249f3a3e442d OK, so that's good insert. 80f5cca2-d30e-4cd3-a92b-1f2245724f98 This is getting unwrapped. 3fcdf6d3-180b-46d1-9666-4c6b6f452caf This is just drive by cleanup. 81b3fdfc-9f50-425a-be43-e9e270e54cbe I don't know why Clang format 3578fc94-d6ad-4aae-bbc8-030aed47aedc decided need to wrap this, ab05b1e1-5250-433d-a333-3faf6f132ae3 but this change is obviously correct. 586f0c2d-2b6e-459d-ae5b-c79548d17fd5 UM, OK, now we're adding. 99085437-9edc-4a97-9b1d-f87487884a28 So we got this thing here. dd88f0ed-58eb-4111-8e70-1f605cfc5abb Products horrible and then prepend range. f606cd42-1f75-41e4-a07d-d2ddcfdac37f OK if def seedlip containers ranges. f70c6941-5710-482c-8667-98edff1c7c09 Yep, 3e632604-4c58-4930-ba5b-820c0056fcae I'm not too worried about the spelling here, 036b77da-f51d-438a-88d1-fb46c7908ccc because you know, test coverage d0a231be-2781-4a36-80bb-0c02b9948c3c will notice these things missing. aecc50ff-0751-4da5-b766-95f03236aa82 Template on container compatible range tie R. a1ca1295-0203-4a68-808c-cb886f5c1b12 Void return prepend range. 766a5430-e80f-4c74-869b-8d2c67057154 Range dropper frange. 85949340-19b1-44e6-883d-4e2fdaf4f521 OK, I was going going back and thinking 64260d51-5f03-41c3-819a-e549de3c1a04 do we need to strengthen anything? 2c3989c6-3600-4455-a9a4-f580bc0fea35 But no, cf2718df-455a-41b5-b313-5e40ce8e436c these things are totally allocating memory, 6ac580d3-6b8d-4c89-b0e5-3b417fe9073d so no possible strengthening there. 136aa040-b357-425e-96fb-5b93a638b81d OK, going back to prepend range. 567874e3-03d8-4a4c-b9b5-87806ec7c6f1 OK so. 09d0c3cf-030d-4da0-bf9a-94036b13d05c Interesting again, fb2460d4-bfce-4ecb-83d9-beed95122806 we should probably look at what's no, b7b75f81-6cee-4f36-abf7-de2c894d410a this is, uh, not the same as before. 7197dfd5-1529-4977-91b1-501e7d551626 We've got this list node insert opt 60f117d0-0bc4-41cd-96de-9a3eb1adb156 2 for when we're inserting stuff. 831d0232-3a67-41a6-a5f8-0a0a0dde1cff This helps with exception safety. 2c5dbb20-1a1d-4825-bbba-61e7bfe56370 This is I see this is simply a pending. 48ba207c-8cd5-4408-9ddb-4f5c47fd5719 To the end of the. List. 1c58cd74-3e34-4d63-9177-1bbd20bf6d78 And then we do a little bit of surgery. 04df54bd-9894-480d-b3be-91e72839c7cc Oh no, sorry it's not adding to the list, ceb2f9e7-f570-41d1-ae73-52f80dd0825b it's attaching these nodes to this list. 345d14a4-552a-4aed-a521-3427ebb9e28e Node insert up and then if it all succeeds. f5716977-457c-4a1c-8724-3b14ff539a6a We attach it to the beginning of the list, 34b1e553-2a2d-438a-bf2f-40f16b7218f5 that's this, attached before. 715a0ea1-4772-4377-8ee1-00c9c5caeb36 If anything fails, 866654b7-d047-49fa-ad10-4fa951937e64 then we haven't actually modified the e874c684-b565-4282-ad16-e628556493eb container and the list node insert up 8c8c955d-dcaa-4e66-bb7e-da4e0f582e87 to will handle destroying everything. 1b2e2451-fb94-4d43-a9a4-ba6bdcede3e9 So that implies to me that we're 37b02d66-f594-4227-bbae-8aa3124d51fa getting some sort of strong dd511b0b-f427-4cfb-b665-75d3acf19786 exception guarantee that prepend 0db6f81c-d288-4c4e-a1eb-76cc67718fbb range is supposed to achieve. ab53e513-0302-41f6-a57f-934e306ad0ea Let's see if that's the case. 3ad5562b-b680-4356-89a2-276733fdfef9 That's maybe universal f77287fb-8b72-4a74-b9c4-31b509f9c808 container requirements. 81648a7c-d671-48e4-9793-a5f997ebe04e No, it's specific OK for. acaebda1-46a0-44b3-8764-3a9e7abc27dd Why is this? Why is this only 564ccf21-4c92-4b08-8040-72afbd96b382 calling out pre append range here? f2920bd0-3b2c-4de1-be6c-5183da523dc8 What about prepend? 9bc44e48-cfc0-49ca-96a8-32539b94aa78 Covered by general requirements. fff6d5ef-695c-45c4-9d84-991b334ce95c Ohh is it is is it general? Yes. 61cc7b0e-7240-47f4-a016-f3ab743868e8 Why? Why is only a penny range e4421b55-1767-463f-8321-28cdb905a870 being called out here then? 496ffc80-a90f-48cd-bca1-44c6b4eeb640 Now there must be something 8de209cd-c2c0-48ea-aa58-fd034f6bf02a special about a pin range. Yeah. 1208acde-6105-4992-9f54-beb3aa56a9ff Multiple elements is linear. 786a11dc-a02c-4fde-b969-bb724072aab9 Doesn't affect iterators 54c96b62-9bd4-4ce7-a7e4-da68c4608a29 and references maybe? 8c77ce54-3c5a-48f5-a7a0-6eaf16cdc165 But Prepend should be exactly the same. 00fc284f-5e45-46f3-a2c5-c600dd35a1ee This is just an editorial thing ebf6870f-61b5-4e0f-a7f6-b989b2c12dc7 that prepended rain should 760d9824-65ea-4239-9512-294e308a1b96 have been called out here. 04a3181c-3f39-419c-b435-d0df3db6f18c What? What is this? 154df5a9-41c9-4541-8737-9e4764245429 This is a list dot modifiers. acb85c95-6327-4d38-8062-c5617835dc5e Let's actually look at the standard. 2b3e7ae5-94e1-463d-8891-5f47fb57a689 Retainers sequence like don't 96027051-d927-4fdd-8b2b-e7ba034512b8 want the synopsis of what the 354c38b6-c367-45ee-a634-13a8d014ac1f actual thing modifiers OK. 5221dc27-9f03-406c-8567-c0e539f10956 Go away. I want to die zoom OK. b7beeec5-19cc-4d86-9a9f-74b0d4cfcfda Oh, I see. It's just a whole bunch of spam. 0cb311b7-c142-449c-9065-7ae99ca54378 Preponderant pushback pushback fdfdbae3-e9b9-4ff6-a93b-00138124b15d append range all of them, OK? 24c28b7c-3d3e-4785-816a-f5e2e3f441c8 I think that I was just confused fc837f74-79a4-479b-872d-cec2d617532e by reading Oh yeah, here we go. f1d9defe-0834-4ec1-a6af-e4cd5bffb59e OK so actually yeah it is the whole spam 16b5c069-8731-4d6e-81ea-8fe949655a5a since we've got this existing stuff. cadc5898-5a1e-4572-bbe9-3f8f35fbe95c I was confused too. 632d2c47-2d2c-411b-b650-5f50786199c9 By the way, you you're moving f32a4aaf-baaf-46bf-935b-fe623e274701 the wording around fast enough. d172d130-bafc-410b-878d-8fef2c2fa90f I thought that was synopsis. 847f1bbb-a1bb-469e-9a7e-0e4ea50011b2 Still, I didn't realize these were 42ea20c8-29dc-4e7e-ae36-085586e39c20 exactly detailed declarations. 0f967ad9-83aa-4a87-8540-ca47417e85d2 Yeah, I thought I was looking 3067c87e-db59-47d5-9bd9-941537af5016 at synopsis up here too. ec537276-6df4-417b-aec5-7f1adae243b2 OK, so that's good. 40c4f8c0-4806-4ebd-982e-d64144e7ce20 So it is this is required to 85896309-e9c6-4c33-8fa8-869f7c7cecbd have the strong guarantee, 0240bfc0-6576-430d-bb53-64dbc9144b99 which is why we're doing this insert up. b677c17c-5469-4987-aa28-2c2652556448 If we were simply. 967d8344-6feb-4051-b6e7-a4070b28ca9e Directly Prepending UM, 8d9f9a76-8e0a-4273-903b-b326020cf4fd then it would be harder for us to unwind. ea42bd9d-43fc-46e0-a40c-5a80c39f6f88 We could, UM, b6697471-0a00-4aa1-8d20-6584bfbd7439 but we'd be doing a lot of extra work here. a82c2dd7-154e-41cf-b633-3e0489a84e0c We get to make that chain, 262cf22c-1b41-4bbd-8e66-46944b6b2271 and we only have to stitch it at 06087139-2016-4dff-814c-18c5e01ae443 the very end to the beginning of 7cf31323-d907-409c-98e0-04f18df8c77a the list by appending essentially bd352855-fef5-42a7-a458-fe5312529721 the end of the beginning rather 970d4901-001c-4fc4-8023-3d8cf2059bc4 than like repeatedly inserting. 0a88068f-6a61-4163-aa79-0e4a4da071d5 So this is efficient. 9149eb1c-7e37-4d27-9bd2-b4fcdff7bc39 This is good. dcc2590c-ee2b-4551-941a-2309b1d26291 Yes, I see nothing wrong with this. 335c2980-e0c8-4f85-b916-360a536b5630 And this just structurally 8a6b72cb-eb01-413a-a462-64db4ce90d13 guarantees strong exception safety, 6d9eeab7-e7f8-49a0-9bc7-f1275545c816 so I don't even need to ask for. 76d9b38a-f73c-491f-97b8-219db81b3072 Hey, you know, we should have, cb723a98-91cf-4ab7-8a76-428d9b3efed7 like you know, some exception f2b283aa-fc32-4999-9543-fa296d476cf3 handling tests or something. 0ffb530d-bd6e-4869-aef9-c53afeb4caaf OK, so that means the pen range 9a510aa0-014d-4d44-ab32-366ce40f445b is going to look very similar a338215e-2898-4937-8fdb-d92fbb6fc719 if dev people containers ranges, c24da800-51a8-4153-bc4a-e0c3406904c4 and because this is Casey, 108aa365-d39c-4ab8-ab8b-224da0266cb5 I'm pretty confident that all of 41e13215-12e4-4c30-8a9e-0464242890bd these methods are being added in 7315043c-0e73-4705-a286-33aba8191657 sorted order matching sorted mean 01d10df0-cf69-4501-9792-3e763f765a72 matching the order and the standard. 8b097877-ee33-4138-a055-5829938b4f46 I can even see here it's 1e4ef052-18aa-47ea-8b9c-c663eb917444 push front prepend range. 1022f8db-a00a-48fc-84dd-0b097b2c4a78 I guess pop front this is not the synopsis. 11315729-ba28-4513-b229-81a8f5c85907 It should really match synopsis order. ba09a510-1a14-4680-b476-23fe590adf98 Here we go. b24486bd-06af-4a86-b8e2-21b413fb5e8f Push front prepend range pop fronts. e7ac7e82-7c27-49ca-9945-7edfabd3c461 That's why they're being inserted b875a350-e168-41b8-a196-a91523d3bb3e in that order, so this is good. 73545d35-0738-4805-b2d9-8443fca65b44 It helps to sort of verify that the b71475a8-c8fa-4618-aea4-7c9e95b7f30f implementation match the standard. 8cc4a40b-65e6-48f1-aec5-fc72702e8d63 We did not use to be disciplined about that. 4fec0901-71f9-49bd-98ee-a19ca310cdbb Casey is disciplined, which is great. f86425ee-87b3-4dac-8ae4-3df7fa7b3667 I have definitely been converted 7bf53e9e-b68c-4e33-be0d-318c0d8174af over to the philosophy of, hey, 8163417c-a143-4638-b29c-9496ba992554 you know, that's the standard order. c5d6a470-fd43-4c60-b41b-c47269b0ea22 Unless there's a good reason not to. f27f4f97-ddc1-40b6-bf38-37707c4f228c OK, so if dev containers ranges d4a378c2-c6d9-4252-ad27-9b0d7cac31ce same sort of deal I can just b53daad4-6366-4d4e-8646-a8ec476e8d11 compare these against each other, d3840937-9a44-4d2d-8ac9-a2c7d7063df8 append range again the insert OPP we 80fba6d8-58cc-4312-bfe3-1f23092ee1ef do the exact same thing but we attach 6251699c-78d3-4692-8fd3-69f866fb3e37 differently instead of attached before. 10e4a2ab-bb6e-4ecc-94e6-0e819701780b Which is. Umm? At the front of the e11562b0-2354-4d55-909c-51d33ad7f195 list here we just say attach an end. 81558d36-65c9-46c8-ad9b-d10fa2fd83e4 Yep, that's good. OK, that's pen range. 94abae79-6e35-43e3-8055-2a6c02f11239 And then assign unchecked. 704358e5-00be-4f4a-adf7-c932bcb8c7f0 That will help with assign range. 6526d181-3a33-4686-91c0-782f130a3fa5 This is. Quite large interesting. 7b17e80d-a476-4040-9fbc-824ca4424515 It's a little bit different than a sign cast. f278211e-13b6-4661-b277-00112c0183da But significantly different OK? 72680bfc-da2b-41d9-93e5-98e37c6f711e What are you? 00413b5d-6956-4353-813d-e7a05fa85aa2 Where did assign cast come from? e667a4cc-4572-4a5b-80eb-cd8b1634b6e8 This is new in the sense it was added. 52cb71d2-6d82-4928-9921-51818775b329 Like yeah this is added 7e177103-16db-4b76-bc36-979429d42419 like the last five years. edc419ff-76fa-4472-a9e9-049d4e4ff5eb So as far as I'm concerned it's new. 20950971-e87f-4e77-bbd7-0e9580d802fd I have pretty good memories from a93a32c4-fae5-4ca8-93ec-d3f259a10fd8 like when I originally learned all fd9fe0ba-f1be-4363-a931-6600a4d8cf5c the containers like 10 years ago. 85748c5b-254e-457a-82db-b69b0b12c923 OK, this is being used over in 408d36cd-921d-41b8-9a33-857a1f7bb51e the unordered containers. 22a68c6d-4018-4fc5-95ba-cc5e2a85ca1b OK, so. It's likely this is Billy 6a5f0cad-f3f9-4a7f-a16a-22710a4d76a8 O'Neill overhauling. 5fe6d1d7-0c41-48c0-a404-3a71ae065b06 Yeah yeah, when we do a move. 58ea889c-1dab-4ccb-825a-9fb287a46ec3 Construction or sorry, e0660cc0-5ab2-49d3-b035-867ebaf1c2bb move assignment. 65a0f9e9-5fc5-4b71-95d2-3e24df192b60 If we're supposed to propagate allocators, 4b044140-c800-46a4-a3d3-88536d4411e2 or sorry if we're not supposed to 7e480cd5-e4f7-45cb-9195-ae1fe451766f propagate allocators. 0cf4d331-1699-4233-8b14-de8ee2ec11dd Then we just assign the guts in place. 4372af59-7923-451f-8fbc-96e2cba99b8e Because we want to reuse as much da079cda-38ac-4318-8d31-117b0b1d1726 memory as we have basically. 3f3d2d3e-7dc6-484d-bee1-c25e293bae5f Yeah, we say hey list we need to sign you and 86c675e1-9c20-47c9-9349-2ec705010e95 then reinsert everything into the buckets. dd9235a4-e6da-4e75-a1fc-843e18ef414a OK, so that's where this is coming from. da241e61-4b88-4def-8008-133f1da964d2 Interesting, so we since you have a private f53724fc-a789-484e-92e8-24451f7c96b8 member function on lists that exists only f97cd00f-bf43-4894-a890-e5058240a25e for the purpose of unordered because 981d5f14-6b7b-474f-be04-9cb3a1085a23 we implemented the unordered containers 1ba386bf-07fd-496e-bc61-557f8097ba6a bidirectional link list, because why not? 72f64782-9fa3-4b6f-b63e-25b1229a329f Taking away constantly can assign to. 91ea9f25-5f07-4b1b-8966-056f42afec06 Yeah, yeah, that's really dirty things. f6026bdc-fb38-4295-8896-10a7fea65288 Look away, look away. 6887729e-f65a-41e8-b5c7-09f813079f5f OK, this is doing something 8137f4d3-f5a0-4fd7-9671-25fb26ada818 significantly less evil, d49c99fa-e4b7-44da-902a-02fcfdb0ebd5 but still sort of similar, 1ba9af0a-7f39-4941-82a7-550af2cb866d which is why it's being added at this place. 8a89ad48-81f8-4dfc-abd1-051e95e69689 So this is now templated on Iterator c28bed95-969f-4854-a6b0-d9325ee15074 and Sentinel assign unchecked 8d7a87a8-2dcf-487b-84c1-d2a8b6b78799 interfirst consentino last assign e7b83ccb-f7a1-4384-aad0-7cf3e169da77 inclusive first exclusive last. 13cf33a2-e986-4acd-b022-087554211902 OK, consulado, my end is my prior to my head, aac01822-cbc6-4dee-a6c3-4518f7c1cb35 so that's the Sentinel pointer. 9efee580-6677-41e0-8182-42c107958edf Auto old is my end next. e180c05f-0e80-4f79-be81-2c7354bb7244 OK, all points to in general 4802053b-72ad-4a1e-8d68-cb3c51fdc042 the first element of the. 317cad68-6ee1-4d15-9f39-913c60779784 List or the Sentinel itself, e0615e1b-58f4-4246-9676-5779423c4b76 if the list is empty, OK, b918c132-5770-4cf5-a735-083db6f99ad1 so this is saying forever. fe5fb9f6-67d4-4a2a-bd25-ef11c5135fd0 Attempt to reuse a node. b4383083-be36-4f5f-819f-e1e3c7cbb4de If first is equal to last, b05285ec-970c-42aa-a58b-389d43283052 that means we are now done. bcdbfb95-58ff-476c-965e-657ef9a8c5fe We've consumed everything 6ffcc0b7-3613-4c32-944f-dadddd136b4b from the simple range, 70a3738b-be0d-4011-8c6c-851f1da324da so indeed input sequence exhausted, cf5cb2e5-f474-4976-acd7-f42ee348e7b5 destroying the allocate any tail of 130a2b98-f838-4180-96f3-e0237a019ab9 unneeded notes unchecked, erased from old. dffff46a-ff32-4989-894f-7d22743315c8 All the way up to my end. 130d00b9-c3b8-4b89-b2c9-bc1b744bba8a Which could be empty if we've exhausted 80338871-8c78-44bd-8237-f00fe1e95cc6 everything exactly, then return void. 0ab4c2a5-dbb6-4992-a3e6-c49319cb31f7 OK otherwise first is not equal to last, 97c89727-5bbe-4709-aefa-79f5a38bed79 so we do need to assign something 4204720c-c2b0-4abe-8538-2a97ba393b1d if old is equal to my end. 022bd04a-8325-4f0e-aaf9-32ff66b89428 Then we've run out of notes. f852379e-babe-4cac-bdb6-f18ee7c78b1c No more notes to reuse. 3c1744f2-4ec2-4c87-bc88-816425725f0e Append the rest so. 758dcc63-0e69-49ef-a597-244b23529b96 This is going to have strong b8a784df-8a6b-401b-8328-b9b71e482f37 exception safety. 85529fde-60b4-4c7f-9f6e-d2abbbd69ad9 Which I'm not convinced is necessary. 04b5f569-a980-4a46-9d84-f24ed9d8a959 We'll check that we'll append everything. 2eba907d-c591-4b7c-b433-1c2796ad9dd5 By moving in first, e6a79dfa-d9b5-4d02-9f66-8d6f383dc532 because you no longer need that and 4a2dd3fe-6489-4df0-825c-4b4fe15c6930 last and then attach at the end. b61cb11c-0204-4176-85f6-51fb286758ab And then return. 3798174f-26e4-4c0f-b0ca-c2fd00041b1c OK, I'll come back to see if we f065d29d-3539-444b-aad4-28079b2942f7 actually need this insert up, 6ae9ce12-aa8a-4013-bfa0-e6aa0e73a4a0 otherwise we can reuse a node 82406b1b-22c0-4d1a-8098-2c6fbebd16f6 so old points to node to reuse, 1c5d6248-9357-4ef6-9bcd-ee3a519be001 assign my Val whatever is in deara first. 782cc748-5299-4172-a5ce-b2534004214e Step forward the old pointer. 36564cfb-a94f-43dd-9c1d-71f1e7a63de2 Which might circle around to my a148d27f-599e-4bc5-b034-5eabaf45c3e5 end and will detect that. 78bfbd16-5d9c-4bec-aba5-f182d64ce3ae And then also increment first. b29b827a-f547-42cf-b84d-712838be0919 OK, this all looks good. 26ed8827-515a-41cf-a607-244f6ba33ce0 Question here is do we actually 484b1a69-c430-43df-a87a-041fda9dc149 need and this may actually there's f5cc303b-18cb-4e3c-bce8-315d65699028 no real extra expense to using 81515622-fd3b-405e-bdbb-53b9a34970b6 the strong exception machinery 5560bad7-ac76-4255-8c44-8c554eede145 compared to just depending stuff. bb488cbe-d419-4603-959e-8cc7e2c035b4 So let's see what a sign range says. c9d4d41e-7745-4d8f-9433-6295d573be17 Cuz like certainly we've done work a945c07c-952a-411b-b5dd-3360f722b515 like this doesn't actually does not f65931c7-1359-47ee-af8d-3c06eb8f4d53 actually achieve strong exception c0eef16d-a977-48e2-a8e0-31a917adea7d safety because we've already 6b573148-4cfb-492f-b769-2254ff1e716e like rewritten an existing notes. 6385cedd-5e04-4a53-af58-757e7d5490fa It's not a modifier. 573847d3-39c2-4cdc-a697-c952dd3be509 Just assign range. b6ae7026-cbe1-44a3-8e40-18f2845b0a7e I don't think that has any. c289cf8b-43fa-4ff7-a9db-3c0a9f0cc490 Let's see? OK, let's actually e47ab2da-e809-4b49-b774-cea7d1106042 search the standard. 0e2080cd-b4d0-49bb-b621-bfb747a9401f I'm search for assign range. dc8bf8c6-6ff0-4ff4-91c0-11f2cca819f0 Quite a bit for to catch up. 4a70eeab-4d2e-450f-b628-154dc47b5a64 Of course it exists on many containers. eb58d664-2fd0-4312-9f9b-ccfddbe27e1e It's basic string. This is, ccb72566-d370-410a-9f51-0d2bcf2bc248 Oh yeah, there's no more tables. 3e32641d-dec4-4e92-b6a5-f49bdeeadf2e The 4910 got rid of that horrible b1003a00-6f20-4113-aab4-9d5ed2cabe71 container requirements table and ae05edb2-376f-49e0-8986-1dca3684a152 it's now just normal paragraphs. ab6fd6a9-4e3e-4ec7-94e9-f9bda68b6392 This is so like a it's readable, 23712fd3-b2bf-4698-8ee3-1526f49e0be0 but it's so weird because it's 37a75c6b-21d0-4526-88bf-1c610cfd1522 like totally different than c4c19fd7-a8e3-4fcd-8d0b-2c398175f477 what we used to wade through. fc3bc45f-4a90-4d8d-8a85-d048fc2a1ff6 So I've gotta get used to this new work. f181ee02-662d-4143-b328-0f5b2ac0d38d This is the first time I had to look at it. 2b72e60e-9c14-44dd-9a18-0897263c28b5 Umm OK, so it says assign range. 7a413e3e-d77e-44e1-8c39-7694f503d7ce OK, here we go. Resolve. c5366f7c-e026-4409-8c15-d79935028265 Voyage mandates a bunch of stuff b27c3b82-5ae6-46c5-a194-fb04f8b81e0b preconditions, a bunch of stuff, effects, 4b2bdffd-0779-49b4-8b58-9e4e13f81efd replaces elements name with a copy 050d60d0-c243-4a52-af9e-391908bda455 of each element range and validates. f49db87e-5d00-416f-a20d-ec6768e9e27b Everybody also validates past the b61829d6-1723-4f5b-b187-1b87aa77054d end iterator for vector and deck. 2af57495-b8a2-461e-b81a-8b7ccb25b399 Each iterator dereference exactly once. f18dd51f-7aa6-4758-a8f3-eb1fbff35ba4 There are no exception safety requirements, 01b97847-6548-4287-a88b-1eda67bb6e34 which is reasonable because if you've 8157f5a2-bedb-4802-90bc-f02b4cb591d1 assigned a bunch of existing stuff, 4488e157-15be-4845-91ac-a4b50b9bfa93 there's no way you're unwind that. 27ad3761-8132-4db9-a5c5-f47dd3b79c51 So it's unclear to me whether 0dfc70fc-2514-4e59-99a2-e9c5bef6b712 we actually need this op. f256e39c-325c-4dae-ad59-1680456c9ad2 UM, could we just keep inserting nodes? 6a2a3c5d-17cf-461a-9fd4-459c5ef07515 The question is, do we have a 1ebcd057-5007-42af-aae7-f9d3565cf0fc more efficient way to do this? f47172d8-4fde-4e79-89be-441ae64396ce I don't think so. This may actually 0ab03ab8-e64b-469b-8c35-65171da9721d end up being the most convenient way. dbefbeb1-9849-4526-b179-aae163cd3611 Uh, let me see. 4dc8b440-551f-4e94-bfe9-1718f36b2859 It's certainly not. It's not inefficient. f8b5f29f-993f-4b2b-86dc-6d135194a6cc There's other places like in Vector where a10e1823-5d55-43bc-9b5a-4c5210b529d0 calling the strong exception safety 58b28dc3-1c52-4517-a86a-6085aae77e68 stuff is theoretically less efficient. d0ea6113-566f-42c6-b447-a13bf78e98a6 So let's say I'm looking at lists here. b5eb8d79-399c-459f-8d1b-75e94b68d7dd This would be where a pending. 29ee0b80-5b49-4c61-b77b-3b87202f13a4 So that's the insert one. a317b990-3545-4a3d-8b09-0cf205cf6830 We would have to call insert to end, 08744a4c-e965-4248-bb73-b42c0f463738 but that's an arbitrary one and that b0d1802e-0a03-4644-852c-861d3bc767a1 inserted end has a lot of logic. 359d8410-5e0c-40e2-8d02-601059ef784f There's append N. 5a820d31-7688-4ea2-a115-c69b6384d770 We could do repeated. a0111a65-cbea-4798-ba2c-b9ba335c3e6b Essentially it's a repeated pushbacks. 3422de1d-854b-4f62-bb72-6f72ff5ec1af Uhm, or place backs really what 148511be-62fd-420d-b49b-b5bf57577790 is in place back look like. c83c1f9e-9d77-4408-899d-e0ca8e8d8948 And place back inserted end. 4057d76a-0137-47e4-85dd-90db3a07a92b Emplace give it my head. b478e7c2-f224-42ba-8d69-e3ad12a584a3 And it's got that special return thing. 96adb66f-7583-4065-9160-03914c70be51 There's some place implemented. Is it above? ec7c1576-76c0-490b-bb4a-ac9d30a9ed36 It's probably below. I want kiss. 24f3f59d-87ef-437e-9850-005f40508a61 Place. OK, if we in place we 71546cf3-f92a-4ff9-9fcd-18cf5dddb7f0 actually use an in place up as well, 03640238-2eee-45f5-94a1-44f0fd273269 and then we transfer. f53b4d80-1639-474f-bf41-231c3b72af6c So I see no advantage to 6f808696-4ae6-493d-bef7-0b2683fa74dd trying to avoid the insert off. d7085860-f6e0-4421-bbfd-4dc6d26e2786 We should just use it, agreed. 718593bd-9505-49a3-8f55-7f3f037e2e25 OK, great assign. Ohh interesting, bf1d7c0f-0ad4-45c1-9b72-184e79713662 so our list assign used to actually 0b9188b4-306e-41bc-a3ab-45d61afb3988 go through that assign cast which. 77cd0a43-8d38-4334-90c6-60d03c47e597 Existed primarily for the unordered 87ec3630-cc66-41a8-af2f-0aa1de9b3011 containers, now it exists purely 7e913100-9d23-422b-b3d6-0ce9dcce4b8d for the unordered containers and we c4e062e1-f186-433e-b2ce-1f9d7d93a68c don't need to sign cast reference. 5d54bd50-32f3-46c4-8e96-9f4a7a215c93 Yeah, that's weird. b8ceee68-fc36-4a5d-8707-de8697d5e742 Casting existing notes to target 87c896f7-de87-44f3-8490-b97b10bc86f7 ref to try to reuse stuff. 3e521e68-c043-47e2-b8f1-ae1092656d23 Yeah, I I like this change. ddbee883-c0a3-4737-9be8-9d89b0e91044 Get rid of internal calls to assign cast. 9e443b91-fef1-4b05-a30e-7ac520475615 Leave it only for the inner containers. 5bc63a30-336f-4883-b7fc-d2d121669cf7 Assign unchecked. Rooting stuff 82828f77-5b62-4935-a0e8-76220288d143 through that makes a lot more sense, 7712ea30-85c2-496f-962c-363f52e71be9 and this exists for all standard modes. a22037a3-172c-406d-990a-c0da83810a65 Yes, I like this a lot and then 085b2d8b-322e-40d2-bbdf-531b2a59d4c8 we just unwrap first and last. 4f841520-d372-4ee2-8544-8e2f5930ffaa Why do we not? 8cfe3029-b514-4d78-ab14-752e9e14ad4b Why do we not validate the range here? fb7fa962-8dfd-4d24-86f7-fe73757f49aa We just unwrapped that seems wrong. a182dacd-e85d-4a00-8ad7-1d3c15db36ad Just saying the same thing with 858b8667-c768-4d06-ac2f-306f0d8a2d33 my my mic muted. ff8d33b9-2334-4045-996e-995ad05bed7d We don't verify these. a8baf6ed-af4a-439e-baed-ceb7a4ac4d0d Yeah, that seems wrong. 20fa6778-99b1-4945-a0a1-a97c698a4b39 We're we're usually pretty 104fbb94-e08c-4abe-9524-fdc64ca56841 consistent about ADL verifying. 92d57a97-c49e-4af9-be83-a852e353b2ab I think this is pretty. d2bf8d7c-093b-468f-b020-b0d001cc99b2 Yeah, but we've already 68d543d6-ee24-4abb-a06b-52faa69fce94 unwrapped a sign cast does not. 1411a618-3a92-4939-b662-282381db585a It assumes they're unchecked. b4792acc-cd5f-4cdf-8dc7-746c728fb6dc I think it's just a bug. Yeah. bf3b6a92-c9ae-45cc-91de-ef9baf21e505 Pre existing bug, but I'll fix it here. 6b50290f-ffa1-4897-9c7e-f7bb764298ed OK, yeah, we don't want to do a119582b-73de-492f-b47e-15fa8e3fdb5c too many unrelated cleanups, 68783b5f-bba0-4968-978c-2e220d675fc7 but I mean here we're just b84ac343-8fcc-4b5f-a1aa-bff145a8bde0 reimplementing or assign. 458830df-2355-4b4b-b7fa-177cb404828c It is reasonable to fix this bug here, ce5e2436-476f-4bbd-b408-257ce3cc3f0b especially because it's doesn't 38922bde-f679-4703-9ca3-0348650296d6 involve like a lot of control a19a516f-b3f6-49a7-838a-37a1f57469a1 flow transformation or something. ac0c05ed-5dd7-480b-9e08-70bfa788838c It's just atomising verify pre-existing. d0b6b9cf-b9e4-46b5-9412-7a7e22b827f7 Oh wow, we weren't. Umm? 1ee61930-fe0f-4215-869b-971a68b38183 ADL verifying this range before. b705f707-35d0-4b0c-8f87-b1e196c39e63 Unwrapping UM, not sure if it's easy to find. 8845071e-d265-4554-a5ef-f47eb0beeda3 In theory it might be possible 90462e5d-bb15-4fa0-88d1-19ea9eb9ce70 to find other ones. cf56888d-f55b-40b9-af90-79040c3158d2 It would be like to get on wraps. 14f21263-976c-41c1-8414-5ae7c3661066 I could spell properly 7d42dd77-7b44-4c9c-8da3-5fb2f952c0a1 with casing. Like this? 16426ed3-5119-4548-85bd-009ac71e4de7 Yeah wow, we got a bunch, 914d61d4-dcc6-4e1a-ad7f-cb0a3a94c5c6 so we're essentially involved like scan a1355493-adf5-41c3-822b-4e47b47adbd4 through every currence and look for 88 3d94783d-629a-4cb0-81c3-b1f0159a3820 L verify range on some previous line. 80cb07ed-430e-433c-8039-b329f6df8af0 It's like you're looking at this one. 88e4a403-2cab-45a4-9ac3-4959002e111e Ah, but we have helpers. 16437d15-d1ba-4dea-b54c-72536b221b9f Get unwrapped, unverified, 51ecceea-2a07-4270-9a23-8d299848892e says hey, we haven't actually 4b2618ef-53cc-4118-bd15-c884525f3e01 verified this thing yet, 6889e830-9c00-4d47-bc45-470e043fcf61 so we'd really want like 67a8f97b-945d-464d-948e-9d8b0a4e45a9 just get unwrapped by itself. e0547e2c-b128-498d-8395-55f7d143a772 Yes, so just making sure. 380b1cd1-a063-4031-a121-0cd24b115f5f Hey, you know, does everybody verify? 4a2772a5-0ac6-4142-9f92-801d1f7193ed And here it does. bfebb04d-a6d2-4ed7-a17a-8cb1704fff47 It looks like we do most of the time. 2652b796-99f8-4346-9143-cc33079451ad Like this one, suspicious, f851e516-c013-4f16-8c73-edc679657aed so I'm not actually sure how 59bf1e14-aef0-4d06-ad2f-b62e8571e9ec widespread this problem is. 085f4e67-2d27-400c-b683-5ee691402e24 There could be there could be others. 925ba2db-0f9c-44be-9435-73100c50690f I'm not gonna go scan the whole STL, ec92f172-9707-4635-b739-7a852e49918d but I'm like in other containers we do like. 40d327ef-ee32-41dc-ba30-d4590f53a3d4 Here's deck, assign deck, ec34bf6a-cdc4-4155-a519-961c9ede44ec assign does verify range and then unwrap c5459693-cbfa-445c-abb5-d8c7415d9c12 so it looks like just list maybe. 9c1cc60c-bee0-4f44-b35e-0b1adb6d1589 Yeah, even forward list is cbcf150d-0a30-463d-852c-d5c1004b552d decent about a sign verify, fbbcbb68-3949-4da8-908a-32883f15b63a so hopefully it's just isolated. ee98b31a-e62d-45e9-b91e-2458e75a974b Doesn't demand a whole 49eb4ef0-1806-4dd4-ab3e-d6e7a24b4ef5 still wide audit. This is. 48ac0bef-c108-4e54-9ae3-6fa82ab880c3 Yep, here's the one we found in list. e57c3b49-9ea8-4daf-860c-86a77f3a2173 That's the the bad one. d9f67cb5-80e5-41dc-be31-17c480d7850f OK yeah, well one line fixed up is fine. 1a59fa3b-2376-4ee5-a395-7a7d7f076e86 OK. Find all the bugs. d28a082e-f6ab-4b5f-9291-73014fd8c2b9 Uh, Next up maybe we'll get through list. 644513bc-4af0-4cde-b8b5-3fd6c3bde223 Uh, let's see. a02ee312-e3b3-45f6-993c-c00a17e9a50e We're a sign range. 3a71c7d8-3bc0-46fe-951e-ec215332993d Let's go back to the actual paper. 8022417c-a818-4dcf-9c4e-22160a1be479 Assign range temp if dev containers ranges. 3814cf97-7574-492b-bbc8-fdaaf417f032 Yep, template container compatible range RNG. acbfac9a-348b-4bac-9d19-6eff8960c391 Void assign Range Range Rover Range 775285b6-02f0-443e-b16d-128371b111f6 we can directly call sign unchecked 5d67bcee-0720-440b-bda9-e67c03d5fe94 because we know the range is good, 18015cd8-7603-4904-8623-41c2687b46d9 we don't need to validate anything. 677cbc9c-820b-460d-bea4-b6fef981a536 OK, so that's the sign range. c6e30e9c-8e48-445e-9d15-533b699c72a4 Here. Insert. This is unwrapping. c277b042-9d1d-45be-9e2a-054ce4eb2997 I'm OK with this moderate level 05ecfca4-3404-43f1-aa35-dbebfac1bc57 of Clang format unwrapping. aba95d47-23a3-4652-8e5c-842849d1a462 I don't know why clang format. 5313cfc5-978d-4adc-9abf-48ee8c24c553 Oh, I see it's a common detach. 376db7d6-602d-4da8-9ad8-9d8f26f21b6e It's not a pure unwrap. 7cda45f4-0263-451d-b145-bfbe58e58dea Yeah, it's fine. cd557b72-bc17-4800-9bca-dd49e5c133a9 I do know that in 1000 line PR. c5a0294c-48a5-42fe-a221-2103e2320738 Maybe this could have been separated out, 327178e5-e2a4-4409-a99a-b37dda39b439 but it's it's fine, dda11056-bf48-438f-aa71-e06e3bd6596a there's not merge conflicts. 47a7eac2-ba7e-4ec2-9dd9-83f6d0fe1bbd If I see a lot of that, 7db93b04-f3dc-4871-ba3b-4d1c7e7d8b5c I'll start grinding my teeth. 009c51df-69c3-4df6-9abc-afbcb52933af If Dev CPV containers ranges OK, 4f4c2b03-156d-4a2c-9311-03d12b3d70f1 insert range. fbfd5621-0052-43ad-a81b-207c48ca18cf This method here template container 215736bf-c920-44a7-8abe-17e8c15ed63b compatible range TR iterator insert 244ad738-8a96-4d4b-927a-cdc27b4735f4 range take constant iterator position. eecdfa64-1b8f-4d01-b116-d4c9c4aa4745 We call that where? And. 3ca170f0-76ae-45cd-9790-86502b97d291 Range rapper frange Yep. OK. e60b4176-160e-47f4-a6c6-503387dedb12 So if iterator debug levels two, 88d1e0b1-0085-412c-8d2d-22c0188599e8 we have a check. 4c9fd29c-cefe-4c9b-91b8-4f4a02070e4b Here I should be looking at 5ca19fcd-bec8-4241-a6c2-139ff259b7d6 something pre-existing here. 5a81b449-f768-4ce5-9105-4130b9c520a3 Yeah, because it's going to look like this. c10f6768-c0df-48bc-a0d1-ec4587c7c369 We should verify that the where's container b35630f8-ff97-45e3-b778-5141bf658f78 is equal to the address of my data. 02ab7f46-0f3f-4c31-bfa5-7e6334e8efaf Otherwise list insert iterator outside range. 2bc03010-762f-4b1c-b3c3-8a291338b939 Yep, usual comment OK or assertion. 1ac91133-9a7a-4ae5-a50f-3b41bdba99e0 And then we have a range 980b31d3-54b6-49ba-a797-fc1a4f8ce33d we don't need verify. 9f4b5061-8ffa-4dda-afa7-7cfa642c9121 Let's make an insert up with 70767079-e29c-4aa1-92e4-bbc04e698fb5 our allocator appending done. d4ea468a-7a0d-4531-882b-962a6c7620cc Check you begin, you end and then. 51796f5e-5f0b-4789-a2e7-40dce04a671d Make it or attach before. 8ff0f1a9-10a6-4fc4-ac85-8394dceca2f9 Yep, exactly the same, it's good. c73b738e-cc9d-4fda-b781-696e8019fceb And then C tab class template arm c3b55d37-ab45-4fad-89bf-5887b7a01f0c deduction if Dev cglib containers ranges. 2cddcdfb-9003-4f8a-b6ad-d8b17ab7699f We are template on ranges input range R&amp;G. 2f774042-c0f7-4100-8d6b-88974763126f Class allocator defaults to 1abe53da-4818-40d8-ad7f-85722ad19173 stood allocator of ranges. 05ca5457-8c20-4acd-8aca-05ab34b69975 Range of value TR and G. f7bb19ca-345a-4ea6-b3b6-0df4034d9a96 And we've got a constraint here. 967f94db-99e0-4620-96b5-505f348fbe16 This is going to be. 2c2fdae6-2a6e-49d3-b69c-293de90c0926 Standard Y If you're a guide 9a3793e4-6227-4ed7-857e-5bca44803630 that's templated on allocator, b46f96a3-f051-41bd-b6a5-4305c21f2112 you actually need to be allocator ish. bd052824-576e-4535-a9ec-545555e86c38 That's what everybody else is constrained on. f3dbcf9b-114b-4702-b231-234ff5ab1134 Like if I can expand this. ef56c22a-dc71-42e1-83ee-e0245ce36649 Yeah here enable if. c40c5f08-3422-4029-a923-2c4acb6edfc5 Is allocator alloc value. ff0abe33-3d33-4c8f-bcea-ebdda48e4b20 OK, in zero do we have another allocator V? 96c1a6fa-360b-4c72-8e65-8428c70de999 Or is it only a struct? 545dc8ca-0d93-4cbf-9f7a-7b2875f8e6c7 Looks like it's only a struct. 5ff80667-ab61-4102-ad94-2b41471c6538 OK, that's fine. eefc3c76-91bc-44a9-92d9-6233d0243f71 List from range T range ref ref. da587f75-1e91-4991-a799-3c5bbad85ced Alec by value is equal to Alec pren pren. fe928b53-d1f3-43da-8bb8-732c3d6dfcef Deduce list of ranges, 609283db-3f7e-4389-9064-1090e8e057ad range of value TR and that allocator. f6c4776c-0d47-4712-8736-c15a4110d1c5 OK good that's list. 7af00b6f-278f-486b-b63f-c97485d01d72 Yeah, we got through a container. 4b7c5dc5-a6de-4e27-8380-d3c74b636775 OK, let's see it is. f94c8b91-355b-41c2-83f4-fca7028cfcf9 525I think this may be a good 6eab4e07-cab4-4656-9180-98787778b06a place to pause the review. 55f98ec5-4dc9-4452-83f1-34a4fcf69a1e We may be coming back to this next week. a9abd4fa-46a5-4f16-a245-b28392b94a72 Because we've got all the other eef771c0-f25e-4721-9aab-3116bf6763bd containers to go through and b4a1c9bc-57e6-425d-9be6-dc89b6b7ac3c then a whole bunch of test code. 85adf0f8-7584-4f37-a680-d0bfff9eeb25 Hopefully most of the containers 22e6efbe-79b1-48d0-9394-d64aa5e945a9 except for vector will look similar. fbdf69b6-1a9c-44d6-acf3-364fe87b4fd1 Ish vector special because of its ccfa1ef2-f339-47dc-898f-b68178b6ce6f strong exception safety guarantees, 073f8006-2641-4efa-bb14-69cd92ba7f9d but I'm hoping that these change the product 9ad17576-74b9-4020-b827-16cd60e7d21a changes are now going to be more mechanical. 1f17f83e-5f5b-42c1-aef0-2a540a9b485d Yeah, deck is always special 99ed5b54-989d-489b-9c89-cdacba87a854 because of the proxy. 1d23c537-0331-4799-962f-de0e537a3802 I'm just sort of go OK. 2a367ba2-f7c4-4b68-a557-d70c41c8ea9b We got some guard stuff here. e73bde8d-05f5-40f9-949b-da03d1cca2ad OK, there is a fair amount 51fa62ee-afab-4ffe-94fd-e843afa1a7cd of container surgery fun. 9a167433-2452-4280-a55b-04b92632660f Yeah, I think if even if I start 80130e89-e90e-4bb6-9ee5-4e3b3bf51e11 forward list forward list actually does 567ffdb3-74be-45ad-afba-85a1eacf26d4 look pretty similar to list. Yeah, 81ef0da1-5b17-40fa-8c78-f283e45a571c I don't think I can do that in five minutes. a6451262-8e7a-4b0d-bc73-3ac248e78620 OK, I think this is a good stopping point. 6f9090bc-570f-41a2-941e-5c4142010f92 I will submit a very very partial review. 08794205-0263-4bcd-b6ce-05ee42e9f548 Five out of 117 files viewed, 116b1cf6-fee4-4d99-8340-621bb57adffc but we got a chance to look at how one 3a88e8ff-d98e-49e9-965e-f6921e5f4bdc container is implemented and the overall a06d6f0d-617c-4bf9-aaba-4f858ff08b83 feature, so hopefully that was useful. d32c5f0a-bad5-4b91-95f5-3f652b6420fe If you have any questions let us know. e3bffe3c-9d0a-425b-9dad-cfdc1d70c7c7 Otherwise we'll see you on ecd9f7ca-c3c4-49ec-98d8-56b20ca73e4a the next open code review. b23d6b79-5222-4684-8c78-f4be28392c3d Thanks for watching.